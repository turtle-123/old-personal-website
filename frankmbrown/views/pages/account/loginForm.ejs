<%# 
PARTIAL ROUTE: pages/account/loginForm.ejs
PARTIAL DESCRIPTION: Description...
LOCAL VARIABLES:
----------------------------------
- locals.pageObj
%>
<%if(!!!locals.pageObj.canLogin){%>
  <div class="flex-row justify-center" id="log-page-mess">
    <div class="alert warning filled icon medium" style="max-width: 600px;" role="alert">
      <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></svg>
      <p class="alert">
        <%=locals.pageObj.canLoginMessage%>  
      </p>
      <button aria-label="Close Alert" class="icon medium close-alert" type="button">
        <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Close"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
      </button>
    </div>
  </div>
<%}%>

<section id="login-form-section">
  <form hx-indicator="#logging-in-indicator" hx-trigger="submit" hx-include="this" hx-post="/login" hx-target="#login-form-section" hx-swap="outerHTML" class="mt-2" style="max-width: 600px; margin-left: auto; margin-right: auto;" id="login-form">
    <div class="input-group block" data-hover="false" data-focus="false" data-error="false" data-blurred="false">
      <label for="username" class="<%-!!!locals.pageObj.canLogin?'disabled':''%>" >Username:</label>
      <div class="text-input block medium">
          <input <%-!!!locals.pageObj.canLogin?'disabled':''%> type="text" autocomplete="username" name="username" id="username" class="medium icon-before mt-1" required placeholder="Enter your username..." maxlength="50" pattern="(?!Anonymous$).{4,50}" spellcheck="false" autocapitalize="off"
          value="<%=locals.pageObj.username%>"
          >
          <svg class="icon-before" focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="AccountCircleSharp">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z">
              </path>
          </svg>
      </div>
    </div>

    <div class="input-group block mt-3" data-hover="false" data-focus="false" data-error="false" data-blurred="false">
        <label for="password" class="<%-!!!locals.pageObj.canLogin?'disabled':''%>">Password:</label>
        <div class="text-input block medium">
            <input <%-!!!locals.pageObj.canLogin?'disabled':''%> name="password" id="password"  class="mt-1 medium icon-after" placeholder="Enter your password..." autocomplete="current-password" autocapitalize="off" spellcheck="false" type="password" required="" value="<%=locals.pageObj.password%>">
            <button class="icon-after icon medium" data-vis-switch type="button"  aria-label="Change Visibility">
                <svg focusable="false" inert viewBox="0 0 24 24">
                    <path d="M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z">
                    </path>
                </svg>
                <svg hidden="" focusable="false" inert viewBox="0 0 24 24">
                    <path d="M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM3.42 2.45 2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l3.43 3.43 1.41-1.41L3.42 2.45zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z">
                    </path>
                </svg>
            </button>
        </div>
    </div>


  
    <div class="mt-3 flex-row align-center justify-end">
      <button <%-!!!locals.pageObj.canLogin?'disabled':''%> aria-label="Login" type="submit" class="success medium icon-text filled">
        <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Send"><path d="M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
        SUBMIT
      </button>
    </div>
  </form>
  <%if(locals.pageObj.loginError){%>
    <div class="flex-row justify-center">
      <div class="alert filled error icon medium mt-2" style="max-width: 600px;" role="alert">
        <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></svg>
        <p class="alert">
          <%=locals.pageObj.loginErrorMessage%>
        </p>
        <button aria-label="Close Alert" class="icon medium close-alert" type="button">
          <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Close"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </div>
    </div>
  <%}%>
  <div class="mt-3 flex-row align-center gap-3">
    <div class="grow-1">
      <p class="mt-3 text-align-center fw-regular">
        Don't have an account?
      </p>
      <div class="flex-row justify-center align-center mt-1">
        <a href="/create-account" class="button info filled medium" hx-get="/create-account" hx-push-url="true" hx-target="#PAGE" hx-indicator="#page-transition-progress">CREATE ACCOUNT</a>
      </div>
    </div>
    <div class="grow-1">
      <p class="mt-3 text-align-center fw-regular">
        Forgot username or password?
      </p>
      <div class="flex-row justify-center align-center mt-1">
        <a href="/reset-credentials" class="button warning filled medium" hx-get="/reset-credentials" hx-push-url="true" hx-target="#PAGE" hx-indicator="#page-transition-progress">RESET CREDENTIALS</a>
      </div>
    </div>
  </div>
</section>