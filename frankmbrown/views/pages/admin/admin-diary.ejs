<%# 
PARTIAL ROUTE: pages/admin/admin-diary.ejs
PARTIAL DESCRIPTION: Description...
LOCAL VARIABLES:
----------------------------------
- locals.fullPageRequest
- locals.pageRequest
- locals.page
%>
<%if(locals.fullPageRequest||locals.pageRequest){%>
  
  <h1 class="page-title">View Diary Entries</h1>

  <div class="mt-2 flex-row justify-start">
    <button type="button" class="icon-text medium info filled" hx-get="/admin/diary/update" data-loading="Updating Diary Search..." hx-target="#out-upd-sea">
      <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"></path></svg>
      UPDATE DIARY SEARCH
    </button>
  </div>
  <div id="out-upd-sea" class="mt-2">

  </div>

  <div class="mt-3"  >
    <div class="input-group block w-100 mt-1" data-hover="false" data-focus="false" data-error="false" data-blurred="false">
      <label for="search-diary">Search Diary Entries:</label>
      <div class="mt-1 text-input block medium">
        <input 
        type="search" 
        class="icon-after" 
        name="search-diary" 
        id="search-diary" 
        hx-get="/admin/diary/search"
        placeholder="Enter some text to search diary entries..." 
        hx-trigger="keyup changed delay:200ms, search"
        hx-include="#search-diary, #default-search-type, #embedding-search-type, #text-match-search-type"
        hx-indicator="#se-d-inde-sa"
        hx-target="#search-diary-output"
        >
        <svg class="icon-after" focusable="false" inert viewBox="0 0 24 24">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">
          </path>
        </svg>
      </div>
    </div>
    <p class="mt-1 fw-regular">
      <span class="bold">NOTE:</span> The first checkbox that is checked below will be used for search. I just did it this way because it was easiest to do with HTMX. 
    </p>
    <div class="flex-row gap-2 mt-1">
      <label class="checkbox">
      <input type="checkbox" class="primary" checked name="default" id="default-search-type" value="on">
        Default Search Type
      </label>
      <label class="checkbox">
      <input type="checkbox" class="secondary" name="embedding" id="embedding-search-type" value="on">
        Embedding Search
      </label>
      <label class="checkbox">
        <input type="checkbox" class="info" name="text-match" id="text-match-search-type" value="on">
          Text Match Search
      </label>
    </div>
    <div class="flex-row justify-center t-primary htmx-indicator" role="progressbar" aria-busy="false" aria-label="Searching Diary Entries..." id="se-d-inde-sa">
      <div class="lds-dual-ring"></div>
    </div>
    <output style="min-height: 200px; max-height: 300px; overflow-y: auto; padding: 2px; border: 3px solid var(--info);" class="mt-2 block" id="search-diary-output">
      <div class="alert warning filled icon medium" role="alert">
        <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></svg>
        <p class="alert">
          Output of search goes here!
      </p>
        <button aria-label="Close Alert" class="icon medium close-alert" type="button">
          <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Close"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </div>
    </output>
  </div>

  <hr style="border-bottom: 3px solid var(--divider);">

  <style>
    .grid-notes {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
  </style>
  <div class="mt-2 grid-notes">
    <%-locals.page%>
  </div>
  <%-include('../../partials/pagePartial')%>
<%}%>