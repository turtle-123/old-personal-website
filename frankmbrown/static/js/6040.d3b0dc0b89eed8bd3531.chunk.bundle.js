"use strict";(self.webpackChunkbundled_client_code=self.webpackChunkbundled_client_code||[]).push([[6040],{86040:function(e,t,r){r.r(t),r.d(t,{onSurveyLoad:function(){return je},onSurveyUnload:function(){return Ve}});var a=r(8189),n=r(60429),i=r(13685),o=r(29812);function s(e,t,r){var a,n;"min"===e?(a="Min Date:",n="min_date_".concat(window.crypto.randomUUID())):"max"===e?(a="Max Date:",n="max_date_".concat(window.crypto.randomUUID())):(a="Input Date:",n="date_resp_".concat(window.crypto.randomUUID()));var i=k({type:"div",className:"input-group block p-md"}),o=k({type:"label",attributes:{for:n},innerText:a}),s=k({type:"div",className:"flex-row align-center gap-2 mt-1"}),d=k({type:"input",attributes:{type:"date",id:n,name:n,placeholder:"yyyy-mm-dd"}});if(r&&d.setAttribute("value",r),s.insertAdjacentHTML("afterbegin",'<button data-launch-datetime="" type="button" class="icon medium" aria-label="Launch Date Input Menu"><svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="DateRange"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></svg></button>'),s.append(d),i.append(o,s),t&&t.min){var u=new Date(t.min),p=[u.getFullYear(),u.getMonth()+1,u.getDate()].join("-");d.setAttribute("min",p),"date_response"===e&&((l=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Min Date: "})),l.append(document.createTextNode(p)),i.append(l))}if(t&&t.max){var l,c=new Date(t.max),v=[c.getFullYear(),c.getMonth()+1,c.getDate()].join("-");d.setAttribute("max",v),"date_response"===e&&((l=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Max Date: "})),l.append(document.createTextNode(v)),i.append(l))}return i}function d(e,t,r){var a,n;"min"===e?(a="Min Datetime:",n="min_datetime_".concat(window.crypto.randomUUID())):"max"===e?(a="Max Datetime:",n="max_datetime_".concat(window.crypto.randomUUID())):(a="Input Datetime:",n="datetime_resp_".concat(window.crypto.randomUUID()));var i=k({type:"div",className:"input-group block mt-2"}),o=k({type:"label",attributes:{for:n},innerText:a}),s=k({type:"div",className:"flex-row align-center gap-2 mt-1"}),d=k({type:"input",attributes:{type:"datetime-local",id:n,name:n,placeholder:"yyyy-mm-ddThh:mm:ss"}});if(r&&d.setAttribute("value",r),s.insertAdjacentHTML("afterbegin",'<button data-launch-datetime="" type="button" class="icon medium" aria-label="Launch Datetime Input Menu"><svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></svg></button>'),s.append(d),i.append(o,s),t&&t.min){var u=new Date(t.min),p=u.getFullYear(),l=u.getMonth()+1,c=u.getDate(),v=u.getHours(),m=u.getMinutes(),y=u.getSeconds(),h=[p,l,c].join("-").concat("T").concat([v,m,y].join(":"));d.setAttribute("min",h),"date_response"===e&&((g=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Min Datetime: "})),g.append(document.createTextNode(h)),i.append(g))}if(t&&t.max){var g,b=new Date(t.max),f=(p=b.getFullYear(),l=b.getMonth()+1,c=b.getDate(),v=b.getHours(),m=b.getMinutes(),y=b.getSeconds(),[p,l,c].join("-").concat("T").concat([v,m,y].join(":")));d.setAttribute("max",f),"date_response"===e&&((g=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Max Datetime: "})),g.append(document.createTextNode(f)),i.append(g))}return i}var u=["January","February","March","April","May","June","July","August","September","October","November","December"];function p(e,t,r){var a,n;"min"===e?(a="Min Month:",n="min_month_".concat(window.crypto.randomUUID())):"max"===e?(a="Max Month:",n="max_month_".concat(window.crypto.randomUUID())):(a="Input Month:",n="month_resp_".concat(window.crypto.randomUUID()));var i=k({type:"div",className:"input-group block p-md"}),o=k({type:"label",attributes:{for:n},innerText:a}),s=k({type:"div",className:"flex-row align-center gap-2 mt-1"}),d=k({type:"input",attributes:{type:"month",id:n,name:n,placeholder:"yyyy-mm"}});if(r&&d.setAttribute("value",r),s.insertAdjacentHTML("afterbegin",'<button data-launch-datetime="" type="button" class="icon medium" aria-label="Launch Time Input Menu"><svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="CalendarMonth"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"></path></svg></button>'),s.append(d),i.append(o,s),t&&t.min){var p=new Date(t.min),l=[v=p.getFullYear(),m=p.getMonth()+1].join("-");if(d.setAttribute("min",l),"date_response"===e){var c=u[m-1]+", "+String(v);(g=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Min Month: "})),g.append(document.createTextNode(c)),i.append(g)}}if(t&&t.max){var v,m,y=new Date(t.max),h=[v=y.getFullYear(),m=y.getMonth()+1].join("-");if(d.setAttribute("max",h),"date_response"===e){var g,b=u[m-1]+", "+String(v);(g=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Max Month: "})),g.append(document.createTextNode(b)),i.append(g)}}return i}function l(e){if(!0===this.checked){var t=oe(this);if(t){var r=t.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]');r&&!0!==r.checked&&(this.checked=!1,e.stopImmediatePropagation(),e.stopPropagation())}}}function c(e){!0===this.checked&&(e.preventDefault(),e.stopPropagation(),this.checked=!1,this.dispatchEvent(new Event("change")))}function v(e){var t=e.id,r=e.label,a=e.placeholder,n=e.maxLength,i=e.minLength,o=e.disabled,s=void 0!==o&&o,d=e.includeCharCounter,u=void 0!==d&&d,p=k({type:"div",className:"input-group block mt-1"}),l=k({type:"label",innerText:r,attributes:{for:t}});s&&l.classList.add("disabled");var c=k({type:"div",className:"mt-1 text-input block medium"}),v=k({type:"textarea",attributes:{name:t,id:t,rows:"5",spellcheck:"false",autocomplete:"off",autocapitalize:"off",style:s?"":"resize:vertical!important; min-height: 100px;"}});if(i&&v.setAttribute("minlength",String(i)),n&&v.setAttribute("maxlength",String(n)),a&&v.setAttribute("placeholder",a),s&&v.setAttribute("disabled",""),c.append(v),p.append(l,c),u){var m=k({type:"p",className:"char-counter t-disabled",attributes:{"data-input":t}});if("number"==typeof i){var y=k({type:"span",className:"min-counter body2",attributes:{"data-val":String(i),"aria-hidden":"false"}});y.append(document.createTextNode("more characters required")),m.append(y)}if("number"==typeof n){var h=k({type:"span",className:"max-counter body2",attributes:{"data-val":String(n),"aria-hidden":Boolean("number"==typeof i).toString()}});h.append(document.createTextNode("Characters Remaining")),m.append(h)}p.append(m)}return p}function m(){var e=this.closest("div.data-range-description-wrapper");if(e){var t=Array.from(e.querySelectorAll("div.lexical-wrapper"));t&&t.forEach((function(e){var t=e.id;t&&(0,a.clearEditor)(t)})),e.remove()}}function y(e,t,r,a){var n,i,o;if(a)n=a.min,i=a.max,o=a.step;else{var s=oe(e);if(!s)return;var d=s.querySelector('input[id^="range_min_"]'),u=s.querySelector('input[id^="range_max_"]'),p=s.querySelector('input[id^="range_step_"]');n=d&&""!==d.value?d.value:"0",i=u&&""!==u.value?u.value:"0",o=p&&""!==p.value?p.value:"0"}if(n&&i&&o){var l="range_point_".concat(window.crypto.randomUUID()),c=k({type:"div",className:"data-range-description-wrapper"}),v=k({type:"div",className:"flex-row align-center justify-start w-100",attributes:{role:"toolbar"},style:"margin-bottom:4px;"}),y=document.createElement("button");y.setAttribute("type","button"),y.className="icon small filled error",y.setAttribute("aria-label","Remove Range Point Description"),y.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Remove"><path d="M19 13H5v-2h14v2z"></path></svg>'),y.addEventListener("click",m),v.append(y);var h=Q({rteType:"range-description"},void 0,t),g=J({id:l,placeholder:"Enter the point for the range point description...",label:"Range Description Point:",defaultValue:"number"==typeof r?r.toString():void 0,min:Number(n),max:Number(i),step:Number(o)});return c.append(v),c.insertAdjacentElement("beforeend",h),c.append(g),e.insertAdjacentElement("afterend",c),c}}function h(e){var t=this.closest("section");if(t){var r=Array.from(t.querySelectorAll("div.data-range-description-wrapper"));if(r&&r.length>=5)return void this.setAttribute("disabled","");this.removeAttribute("disabled");var a=void 0;r.length?a=r[r.length-1]:this.parentElement instanceof HTMLDivElement&&(a=this.parentElement),a&&(y(a),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:t}})))}}var g=function(e){var t=document.createElement("section");t.setAttribute("data-range-descriptions",""),t.className="mt-3 block",t.style.setProperty("border-top","2px solid var(--text-primary);");var r=k({type:"p",className:"bold bb h5 mt-1",innerText:"Range Point Descriptions:"}),a=document.createElement("div");a.setAttribute("role","toolbar"),a.className="mt-1 flex-row justify-end";var n=document.createElement("button");return n.className="icon-text medium filled info",n.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="AddBox"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></svg>'),n.append(k({type:"span",innerText:"ADD DESCRIPTION"})),n.addEventListener("click",h),a.append(n),t.append(r,a),e.insertAdjacentElement("afterend",t),t};function b(e){var t=this.parentElement;if(t instanceof HTMLDivElement){var r,n,i=t.nextElementSibling;i&&"SECTION"===i.nodeName?(Array.from(i.querySelectorAll("div.lexical-wrapper")).forEach((function(e){var t=e.id;t&&(0,a.clearEditor)(t)})),i.remove(),(r=this.querySelector("span"))&&(r.innerText="ADD POINT DESCRIPTIONS"),(n=this.querySelector("svg"))&&(n.remove(),this.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>')),this.classList.remove("warning"),this.classList.add("primary")):((r=this.querySelector("span"))&&(r.innerText="REMOVE POINT DESCRIPTIONS"),(n=this.querySelector("svg"))&&(n.remove(),this.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Remove"><path d="M19 13H5v-2h14v2z"></path></svg>')),this.classList.remove("primary"),this.classList.add("warning"),g(t))}}function f(e){var t=this,r=oe(this);if(r&&""!==this.value){var a=Array.from(r.querySelectorAll('input[type="number"][id^="range_point_"]')),n=r.querySelector('input[id^="range_max_"]'),i=r.querySelector('input[id^="range_min_"]');a.forEach((function(e){e.step=t.value})),n&&i&&(n.step=this.value,i.step=this.value)}}function S(e){var t=this,r=oe(this);if(r&&""!==this.value){var a=Array.from(r.querySelectorAll('input[type="number"][id^="range_point_"]')),n=r.querySelector('input[id^="range_max_"]'),i=r.querySelector('input[id^="range_step_"]');a.forEach((function(e){e.min=t.value})),n&&i&&(n.min=this.value,i.min=this.value)}}function x(e){var t=this,r=oe(this);if(r&&""!==this.value){var a=Array.from(r.querySelectorAll('input[type="number"][id^="range_point_"]')),n=r.querySelector('input[id^="range_step_"]'),i=r.querySelector('input[id^="range_min_"]');a.forEach((function(e){e.max=t.value})),n&&i&&(n.max=this.value,i.max=this.value)}}function w(e,t,r){var a,n;"min"===e?(a="Min Time:",n="min_time_".concat(window.crypto.randomUUID())):"max"===e?(a="Max Time:",n="max_time_".concat(window.crypto.randomUUID())):(a="Input Time:",n="time_resp_".concat(window.crypto.randomUUID()));var i=k({type:"div",className:"input-group block mt-2"}),o=k({type:"label",attributes:{for:n},innerText:a}),s=k({type:"div",className:"flex-row align-center gap-2 mt-1"}),d=k({type:"input",attributes:{type:"time",id:n,name:n,placeholder:"hh:mm:ss",step:"1"}});if(r&&d.setAttribute("value",r),s.insertAdjacentHTML("afterbegin",'<button data-launch-datetime="" type="button" class="icon medium" aria-label="Launch Time Input Menu"><svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="QueryBuilder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"></path></svg></button>'),s.append(d),i.append(o,s),t&&t.min&&(d.setAttribute("min",t.min),"date_response"===e)){var u=(v=t.min.split(":").map((function(e){return parseInt(e)})))[0],p=v[1],l=(null==v?void 0:v[2])||0,c=String(u>12?u-12:u)+":"+(p<10?"0":"")+String(p);0!==l&&(c+=":"+(l<10?"0":"")+String(l)),c+=u>12?" PM":" AM",(m=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Min Time: "})),m.append(document.createTextNode(c)),i.append(m)}if(t&&t.max&&(d.setAttribute("max",t.max),"date_response"===e)){var v,m,y=(v=t.max.split(":").map((function(e){return parseInt(e)})))[0],h=v[1],g=(null==v?void 0:v[2])||0,b=String(y>12?y-12:y)+":"+(h<10?"0":"")+String(h);0!==g&&(b+=":"+(g<10?"0":"")+String(g)),b+=y>12?" PM":" AM",(m=k({type:"p",className:"block body2 mt-1"})).append(k({type:"span",className:"bold",innerText:"Max Time: "})),m.append(document.createTextNode(b)),i.append(m)}return i}var A=function(e){return Boolean(!isNaN(e)&&isFinite(e)&&e>=0&&e<=23)},E=function(e){return Boolean(!isNaN(e)&&isFinite(e)&&e>=0&&e<=59)},q=function(e){return Boolean(!isNaN(e)&&isFinite(e)&&e>=0&&e<=59)};function N(e){var t=e.id,r=e.label,a=e.placeholder,n=e.maxLength,i=e.minLength,o=e.disabled,s=void 0!==o&&o,d=e.wrapperClassName,u=k({type:"div",className:void 0===d?"input-group block mt-1":d}),p=k({type:"label",innerText:r,attributes:{for:t}});s&&p.classList.add("disabled");var l=k({type:"div",className:"mt-1 text-input block medium"}),c=k({type:"input",attributes:{type:"text",name:t,id:t,rows:"10",spellcheck:"false",autocomplete:"off",autocapitalize:"off"}});return i&&c.setAttribute("minlength",String(i)),n&&c.setAttribute("maxlength",String(n)),a&&c.setAttribute("placeholder",a),s&&c.setAttribute("disabled",""),l.append(c),u.append(p,l),u}function _(e){var t=window.crypto.randomUUID(),r="select_option_".concat(t),a=k({type:"div",className:"text-input block medium"}),n=k({type:"input",className:"medium",attributes:{name:r,id:r,maxlength:"100",minlength:"1",spellcheck:"true",placeholder:"Enter a value for the select option here..."}});return e&&(n.value=e),a.append(n),a}var C=function(e){var t=k({type:"div",className:"drag-container grow-0",attributes:{"data-drag":"#".concat(e),tabindex:"0"}});return t.insertAdjacentHTML("afterbegin",' <svg class="custom-survey t-normal drag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path stroke="currentColor" d="M8.5 10a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm0 7a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm7-10a2 2 0 1 0-2-2 2 2 0 0 0 2 2Zm-7-4a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm7 14a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm0-7a2 2 0 1 0 2 2 2 2 0 0 0-2-2Z"></path></svg>'),t},I=function(){return I=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},I.apply(this,arguments)},T={"survey-short-answer":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="number"][id^="survey_short_min_"]'),r=e.querySelector('input[type="number"][id^="survey_short_max_"]');return t&&r?""!==t.value&&""!==r.value&&Number(t.value)>Number(r.value)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required minimum length of the user response must not be greater than the required maximum length of the user response."}})),!1):""!==t.value&&Number(t.value)<0?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required minimum length of the user response must be at least 0."}})),!1):!(""!==r.value&&Number(r.value)<1&&(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required maximum length of the user response must be at least 1."}})),1)):(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r="survey_short_".concat(window.crypto.randomUUID()),a="survey_short_min_".concat(window.crypto.randomUUID()),n="survey_short_max_".concat(window.crypto.randomUUID()),i=k({type:"div",className:"block p-md"}),o=N({id:r,label:"Response",disabled:!0,placeholder:"User Response would go here ..."}),s=J({id:a,min:0,label:"Minimum Length:",placeholder:"Enter the minimum length for the user response...",defaultValue:(null==t?void 0:t.minLength)?String(t.minLength):void 0}),d=J({id:n,min:1,max:300,label:"Maximum Length:",placeholder:"Enter the maximum length for the user response...",defaultValue:(null==t?void 0:t.maxLength)?String(t.maxLength):void 0});return i.append(o,s,d),i},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=N({label:"Response:",placeholder:"Enter your response here...",id:"ursa_".concat(window.crypto.randomUUID()),minLength:t.minLength,maxLength:t.maxLength,disabled:!1});if(d.append(u),"number"==typeof t.minLength&&isFinite(t.minLength)){var p=k({type:"p",className:"block body2 mt-1"});p.append(k({type:"span",className:"bold",innerText:"Minimum Length: "})),p.append(document.createTextNode(t.minLength.toString())),d.append(p)}if("number"==typeof t.maxLength&&isFinite(t.maxLength)){var l=k({type:"p",className:"block body2 mt-1"});l.append(k({type:"span",className:"bold",innerText:"Maximum Length: "})),l.append(document.createTextNode(t.maxLength.toString())),d.append(l)}e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="number"][id^="survey_short_min_"]'),n=e.querySelector('input[type="number"][id^="survey_short_max_"]');return t&&r&&a&&n?{type:"survey-short-answer",question:t,required:Boolean(!0===r.checked),minLength:""!==a.value?parseInt(a.value):void 0,maxLength:""!==n.value?parseInt(n.value):void 0,VERSION:1}:null}},"survey-paragraph":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="number"][id^="textarea_min_"]'),r=e.querySelector('input[type="number"][id^="textarea_max_"]');return t&&r?""!==t.value&&""!==r.value&&Number(t.value)>Number(r.value)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required minimum length of the user response must not be greater than the required maximum length of the user response."}})),!1):""!==t.value&&Number(t.value)<0?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required minimum length of the user response must be at least 0."}})),!1):!(""!==r.value&&Number(r.value)<1&&(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required maximum length of the user response must be at least 1."}})),1)):(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r="textarea_".concat(window.crypto.randomUUID()),a="textarea_min_".concat(window.crypto.randomUUID()),n="textarea_max_".concat(window.crypto.randomUUID()),i=k({type:"div",className:"block p-md"}),o=v({id:r,label:"Response",disabled:!0,placeholder:"User Response would go here ..."}),s=J({id:a,min:0,max:19999,label:"Minimum Length:",placeholder:"Enter the minimum length for the user response...",defaultValue:(null==t?void 0:t.minLength)?t.minLength.toString():void 0}),d=J({id:n,min:1,max:2e4,label:"Maximum Length:",placeholder:"Enter the maximum length for the user response...",defaultValue:(null==t?void 0:t.maxLength)?t.maxLength.toString():void 0});return i.append(o,s,d),i},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u="urt_".concat(window.crypto.randomUUID()),p=Boolean("number"==typeof t.minLength||"number"==typeof t.maxLength),l=v({label:"Response:",placeholder:"Enter your response here...",id:u,minLength:t.minLength,maxLength:t.maxLength,disabled:!1,includeCharCounter:p});d.append(l),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="number"][id^="textarea_min_"]'),n=e.querySelector('input[type="number"][id^="textarea_max_"]');return t&&r&&a&&n?{type:"survey-paragraph",question:t,required:Boolean(!0===r.checked),minLength:""!==a.value?parseInt(a.value):void 0,maxLength:""!==n.value?parseInt(n.value):void 0,VERSION:1}:null}},"survey-short-blog":{validateCreate:function(e){return null===fe(e)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1):!!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]')||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r=k({type:"div",className:"p-lg block"}),a=k({type:"p",style:"margin-bottom:6px;",className:"bold body1",innerText:"Response:"}),n=Q({rteType:"survey-short-blog"});return r.append(a),r.insertAdjacentElement("beforeend",n),r},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=Q({rteType:"survey-short-blog"},!1);d.insertAdjacentElement("beforeend",u),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]');return t&&r?{type:"survey-short-blog",question:t,required:Boolean(!0===r.checked),VERSION:1}:null}},"survey-multiple-choice":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=Array.from(e.querySelectorAll("div[data-option]"));if(!t.length)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"There must be at least one option for multiple choice inputs."}})),!1;for(var r=0,n=t;r<n.length;r++){var i=n[r],o=i.getAttribute("data-type"),s=i.querySelector('input[type="radio"]');if(!be.has(o))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"There must be at least one option for multiple choice inputs."}})),!1;if("survey-paragraph"===o){var d=i.querySelector("div.lexical-wrapper");if(!d)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the option value for an option in this question."}})),!1;if((u=d.id)&&!(0,a.getEditorInstances)()[u])return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the option value for an option in this question."}})),!1}else if("image"===o){var u=i.querySelector("input[data-image-input]").id,p=i.querySelector('input[name="'.concat(u,'-text"]')),l=i.querySelector('input[name="'.concat(u,'-short-description"]')),c=i.querySelector('textarea[name="'.concat(u,'-long-description"]'));if(!(p&&p.value&&l&&c))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must upload an image for a question option that has the image option type."}})),!1}else if("video"===o){var v=i.querySelector("video"),m=i.querySelector('input[type="text"][name^="video-input-title"]'),y=i.querySelector('textarea[name^="video-input-description"]');if(!(v&&v.getAttribute("data-src")&&m&&m.value.length&&y))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must upload a video for each question option that has the video option type. Each video must have an associated title."}})),!1}else if("audio"===o){var h=i.querySelector("audio"),g=i.querySelector('input[type="text"][name^="audio-input-title"]');if(!(h&&h.getAttribute("data-src")&&g&&g.value.length))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must upload an audio recording for each question option that has the audio option type. Each audio recording must have a title."}})),!1}if(!s)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the radio input for this multiple choice input."}})),!1}return!0},create:function(e,t){var r=e.id;if(t){for(var a=[],n=0,i=t.options;n<i.length;n++){var o=i[n],s=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":o.type}}),d=j(String(r)),u=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"});switch(o.type){case"audio":u.append.apply(u,U(void 0,{src:o.src,title:o.title}));break;case"video":u.append.apply(u,H(void 0,{src:o.src,title:o.title,description:o.description,height:o.height}));break;case"image":u.append.apply(u,L(void 0,{src:o.src,shortDescription:o.shortDescription,longDescription:o.longDescription}));break;case"survey-paragraph":var p=Q({rteType:"survey-option"},void 0,o.option);u.insertAdjacentElement("beforeend",p);break;default:throw new Error("Something went wrong creating the checkbox HTML.")}s.append(d,u,M(),R()),a.push(s)}return a}return s=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":"survey-paragraph"}}),d=j(String(r)),u=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),p=Q({rteType:"survey-option"}),u.insertAdjacentElement("beforeend",p),s.append(d,u,M(),R()),s},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),o=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(o);var s=(0,a.getRegisterSurveyQuestion)();if(s){s(o);var d=(0,a.getEditorInstances)();if(d[r]){var u=d[r].parseEditorState(JSON.parse(t.question));d[r].setEditorState(u),d[r].setEditable(!1)}var p=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"});e.append(p);var l="op_".concat(window.crypto.randomUUID());t.options.forEach((function(e){var r=k({type:"div",attributes:{"data-pr-option":"","data-type":e.type,style:"min-width: 0px; border: 2px solid var(--divider); border-radius: 6px; padding: 0px 4px; margin: 2px 0px;"},className:"flex-row mt-1 align-center gap-1 justify-start"}),o=j(l,e.defaultChecked);t.required||o.addEventListener("click",c),r.append(o);var s=k({type:"div",className:"grow-1"});r.append(s),p.append(r);var d=(0,a.getRegisterSurveyOption)();if("survey-paragraph"===e.type){var u="op_id_".concat(window.crypto.randomUUID()),v=k({type:"div",className:"lexical-wrapper rpo",attributes:{id:u,"data-editable":"false","data-max-height":"300",style:"max-height: 300px;"}});if(s.append(v),d){d(v);var m=(0,a.getEditorInstances)();if(m[u]){var y=m[u].parseEditorState(JSON.parse(e.option));m[u].setEditorState(y),m[u].setEditable(!1)}}}else"audio"===e.type?s.insertAdjacentHTML("afterbegin",(0,i.getAudioHTML)(e.src,e.title)):"video"===e.type?s.insertAdjacentHTML("afterbegin",(0,i.getVideoHTML)(e.src,{title:e.title,description:e.description},String(Math.min(e.height,(0,n.CN)()?250:350)))):"image"===e.type&&s.append(xe({src:e.src,shortDescription:e.shortDescription,longDescription:e.longDescription}))}))}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),n=Array.from(e.querySelectorAll("div[data-option]"));if(t&&r&&n.length>=1){for(var i={type:"survey-multiple-choice",question:t,required:Boolean(!0===r.checked),options:[],VERSION:1},o=0,s=n;o<s.length;o++){var d=s[o],u=d.getAttribute("data-type"),p=!1,l=d.querySelector('input[type="radio"]');if(!be.has(u)||!l)return null;var c=Boolean(!p&&!0===l.checked);if(c&&(p=!0),"survey-paragraph"===u){var v=d.querySelector("div.lexical-wrapper");if(!v)return null;if(!(g=v.id))return null;var m=(0,a.getEditorInstances)()[g];if(!m)return null;i.options.push({type:"survey-paragraph",defaultChecked:c,option:JSON.stringify(m.getEditorState().toJSON())})}else if("audio"===u){var y=d.querySelector("audio"),h=d.querySelector('input[type="text"][name^="audio-input-title"]');if(!(y&&y.getAttribute("data-src")&&h&&h.value))return null;i.options.push({type:"audio",defaultChecked:c,src:y.getAttribute("data-src"),title:h.value})}else if("image"===u){var g=d.querySelector("input[data-image-input]").id,b=d.querySelector('input[name="'.concat(g,'-text"]')),f=d.querySelector('input[name="'.concat(g,'-short-description"]')),S=d.querySelector('textarea[name="'.concat(g,'-long-description"]'));if(!(b&&b.value&&f&&S))return null;i.options.push({type:"image",defaultChecked:c,src:b.value,shortDescription:f.value,longDescription:S.value})}else if("video"===u){var x=d.querySelector("video"),w=d.querySelector('input[type="text"][name^="video-input-title"]'),A=d.querySelector('textarea[name^="video-input-description"]');if(!(x&&x.getAttribute("data-src")&&w&&w.value.length&&A&&x.videoHeight))return null;i.options.push({type:"video",defaultChecked:c,src:x.getAttribute("data-src"),title:w.value,description:A.value,height:Math.max(x.videoHeight,250)})}}return i}return null},addOption:function(){var e=this.closest("section.survey-question"),t=document.querySelector("html");if(e&&t){var r=Array.from(e.querySelectorAll("div[data-option]"));if(r&&r.length<100){var a=r[r.length-1].getAttribute("data-type");if(be.has(a)){var n=e.id,i=k({type:"div",className:"flex-row align-center justify-start p-md w-100",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":""}}),o=j(String(n));o.addEventListener("click",l,!0);var s=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"});if("survey-paragraph"===a){var d=Q({rteType:"survey-option"});s.insertAdjacentElement("beforeend",d),i.setAttribute("data-type","survey-paragraph")}else"audio"===a?(s.append.apply(s,U()),s.style.cssText="min-width: 0px;padding-left:10px;",i.setAttribute("data-type","audio")):"video"===a?(s.append.apply(s,H()),s.style.cssText="min-width: 0px;padding-left:10px;",i.setAttribute("data-type","video")):"image"===a&&(s.append.apply(s,L()),s.style.cssText="min-width: 0px;padding-left:10px;",i.setAttribute("data-type","image"));i.append(o,s,M(),R()),r[r.length-1].insertAdjacentElement("afterend",i),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:e}}))}}else r.length>=100&&document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The maximum number of options allowed is 100."}}))}}},"survey-checkbox":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=Array.from(e.querySelectorAll("div[data-option]"));if(!t.length)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"There must be at least one option for checkbox inputs."}})),!1;for(var r=0,n=t;r<n.length;r++){var i=n[r],o=i.getAttribute("data-type"),s=i.querySelector('input[type="checkbox"]');if(!be.has(o))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"There must be at least one option for checkbox inputs."}})),!1;if("survey-paragraph"===o){var d=i.querySelector("div.lexical-wrapper");if(!d)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the option value for an option in this question."}})),!1;if((u=d.id)&&!(0,a.getEditorInstances)()[u])return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the option value for an option in this question."}})),!1}else if("image"===o){var u=i.querySelector("input[data-image-input]").id,p=i.querySelector('input[name="'.concat(u,'-text"]')),l=i.querySelector('input[name="'.concat(u,'-short-description"]')),c=i.querySelector('textarea[name="'.concat(u,'-long-description"]'));if(!(p&&p.value&&l&&c))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must upload an image for a question option that has the image option type."}})),!1}else if("video"===o){var v=i.querySelector("video"),m=i.querySelector('input[type="text"][name^="video-input-title"]'),y=i.querySelector('textarea[name^="video-input-description"]');if(!(v&&v.getAttribute("data-src")&&m&&m.value.length&&y))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must upload a video for each question option that has the video option type. Each video must have an associated title."}})),!1}else if("audio"===o){var h=i.querySelector("audio"),g=i.querySelector('input[type="text"][name^="audio-input-title"]');if(!(h&&h.getAttribute("data-src")&&g&&g.value.length))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must upload an audio recording for each question option that has the audio option type. Each audio recording must have a title."}})),!1}if(!s)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the checkbox for this checkbox input."}})),!1}var b=e.querySelector('input[id^="min_selections_"]'),f=e.querySelector('input[id^="max_selections_"]');return!f||""!==f.value&&!f.checkValidity()?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid max selection value for checkbox input."}})),!1):!b||""!==b.value&&!b.checkValidity()?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid min selection value for checkbox input."}})),!1):!(b&&""!==b.value&&b.checkValidity()&&t.length<parseInt(b.value)&&(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The number of checkbox options can not be less than the minimum number of required selections."}})),1))},create:function(e,t){if(t){for(var r=[],a=0,n=t.options;a<n.length;a++){var i=n[a];switch(o=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":i.type}}),s=B(i.defaultChecked),d=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),i.type){case"audio":d.append.apply(d,U(void 0,{src:i.src,title:i.title}));break;case"video":d.append.apply(d,H(void 0,{src:i.src,title:i.title,description:i.description,height:i.height}));break;case"image":d.append.apply(d,L(void 0,{src:i.src,shortDescription:i.shortDescription,longDescription:i.longDescription}));break;case"survey-paragraph":u=Q({rteType:"survey-option"},void 0,i.option),d.insertAdjacentElement("beforeend",u);break;default:throw new Error("Something went wrong creating the checkbox HTML.")}o.append(s,d,M(),R()),r.push(o)}return l=window.crypto.randomUUID(),c=J({id:"min_selections_".concat(l),placeholder:"Enter the minimum number of selections for checkbox question",min:0,step:1,max:100,label:"Minimum Selections",defaultValue:Number.isInteger(t.min_selected_options)?String(t.min_selected_options):void 0}),v=J({id:"max_selections_".concat(l),placeholder:"Enter the maximum number of selections for checkbox question",min:0,max:100,label:"Maximum Selections",defaultValue:Number.isInteger(t.max_selected_options)?String(t.max_selected_options):void 0}),m=c.querySelector('input[type="number"]'),y=v.querySelector('input[type="number"]'),m&&y&&(m.addEventListener("change",W(m,y)),y.addEventListener("change",Z(m,y))),(p=k({type:"div",className:"p-md"})).append(c,v),r.push(p),r}var o=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":"survey-paragraph"}}),s=B(),d=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),u=Q({rteType:"survey-option"});d.insertAdjacentElement("beforeend",u),o.append(s,d,M(),R());var p,l=window.crypto.randomUUID(),c=J({id:"min_selections_".concat(l),placeholder:"Enter the minimum number of selections for checkbox question",min:0,max:100,label:"Minimum Selections"}),v=J({id:"max_selections_".concat(l),placeholder:"Enter the maximum number of selections for checkbox question",min:0,max:100,label:"Maximum Selections"}),m=c.querySelector('input[type="number"]'),y=v.querySelector('input[type="number"]');return m&&y&&(m.addEventListener("change",W(m,y)),y.addEventListener("change",Z(m,y))),(p=k({type:"div",className:"p-md"})).append(c,v),[o,p]},render:function(e,t){var r,o,s="rnd_".concat(window.crypto.randomUUID()),d=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:s,"data-editable":"false"}});e.append(d);var u=(0,a.getRegisterSurveyQuestion)();if(u){u(d);var p=(0,a.getEditorInstances)();if(p[s]){var l=p[s].parseEditorState(JSON.parse(t.question));p[s].setEditorState(l),p[s].setEditable(!1)}var c=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"});if(e.append(c),Number.isInteger(t.min_selected_options)||Number.isInteger(t.max_selected_options)){var v,m=k({type:"div",className:"flex-row justify-between align-center mt-1"});if(Number.isInteger(t.min_selected_options)){var y=k({type:"span"});(v=k({type:"span",className:"bold"})).innerText="Min Selections: ",y.append(v,new Text(null===(r=t.min_selected_options)||void 0===r?void 0:r.toString())),m.append(y)}if(Number.isInteger(t.max_selected_options))y=k({type:"span"}),(v=k({type:"span",className:"bold"})).innerText="Max Selections: ",y.append(v,new Text(null===(o=t.max_selected_options)||void 0===o?void 0:o.toString())),m.append(y);c.append(m)}t.options.forEach((function(e){var t=k({type:"div",attributes:{"data-pr-option":"","data-type":e.type,style:"min-width: 0px; border: 2px solid var(--divider); border-radius: 6px; padding: 0px 4px; margin: 2px 0px;"},className:"flex-row mt-1 align-center gap-1 justify-start"});t.append(B(e.defaultChecked));var r=k({type:"div",className:"grow-1",style:"overflow: auto;"});t.append(r),c.append(t);var o=(0,a.getRegisterSurveyOption)();if("survey-paragraph"===e.type){var d="op_id_".concat(window.crypto.randomUUID()),u=k({type:"div",className:"lexical-wrapper rpo",attributes:{id:d,"data-editable":"false","data-max-height":"300",style:"max-height: 300px;"}});if(r.append(u),o){o(u);var p=(0,a.getEditorInstances)();if(p[d]){var l=p[s].parseEditorState(JSON.parse(e.option));p[d].setEditorState(l),p[d].setEditable(!1)}}}else"audio"===e.type?r.insertAdjacentHTML("afterbegin",(0,i.getAudioHTML)(e.src,e.title)):"video"===e.type?r.insertAdjacentHTML("afterbegin",(0,i.getVideoHTML)(e.src,{title:e.title,description:e.description},String(Math.min(e.height,(0,n.CN)()?250:350)))):"image"===e.type&&r.append(xe({src:e.src,shortDescription:e.shortDescription,longDescription:e.longDescription}))}))}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),n=Array.from(e.querySelectorAll("div[data-option]")),i=e.querySelector('input[id^="min_selections_"]'),o=e.querySelector('input[id^="max_selections_"]');if(t&&r&&n.length>=1&&i&&o){var s={type:"survey-checkbox",question:t,required:Boolean(!0===r.checked),min_selected_options:void 0,max_selected_options:void 0,options:[],VERSION:1};""!==i.value&&(s.min_selected_options=parseInt(i.value)),""!==o.value&&(s.max_selected_options=parseInt(o.value));for(var d=0,u=n;d<u.length;d++){var p=u[d],l=p.getAttribute("data-type"),c=p.querySelector('input[type="checkbox"]');if(!be.has(l)||!c)return null;var v=Boolean(!0===c.checked);if("survey-paragraph"===l){var m=p.querySelector("div.lexical-wrapper");if(!m)return null;if(!(f=m.id))return null;var y=(0,a.getEditorInstances)()[f];if(!y)return null;var h=JSON.stringify(y.getEditorState().toJSON());s.options.push({type:"survey-paragraph",defaultChecked:v,option:h})}else if("audio"===l){var g=p.querySelector("audio"),b=p.querySelector('input[type="text"][name^="audio-input-title"]');if(!(g&&g.getAttribute("data-src")&&b&&b.value))return null;s.options.push({type:"audio",defaultChecked:v,src:g.getAttribute("data-src"),title:b.value})}else if("image"===l){var f=p.querySelector("input[data-image-input]").id,S=p.querySelector('input[name="'.concat(f,'-text"]')),x=p.querySelector('input[name="'.concat(f,'-short-description"]')),w=p.querySelector('textarea[name="'.concat(f,'-long-description"]'));if(!(S&&S.value&&x&&w))return null;s.options.push({type:"image",defaultChecked:v,src:S.value,shortDescription:x.value,longDescription:w.value})}else if("video"===l){var A=p.querySelector("video"),E=p.querySelector('input[type="text"][name^="video-input-title"]'),q=p.querySelector('textarea[name^="video-input-description"]');if(!(A&&A.getAttribute("data-src")&&E&&E.value.length&&q&&A.videoHeight))return null;s.options.push({type:"video",defaultChecked:v,src:A.getAttribute("data-src"),title:E.value,description:q.value,height:Math.max(A.videoHeight,250)})}}return s}return null},addOption:function(){var e=this.closest("section.survey-question");if(e){var t=Array.from(e.querySelectorAll("div[data-option]"));if(t&&t.length<100){var r=t[t.length-1].getAttribute("data-type");if(be.has(r)){var a=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":""}}),n=B(),i=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"});if("survey-paragraph"===r){var o=Q({rteType:"survey-option"});i.insertAdjacentElement("beforeend",o),a.setAttribute("data-type","survey-paragraph")}else"audio"===r?(i.append.apply(i,U()),a.setAttribute("data-type","audio"),i.style.cssText="min-width: 0px;padding-left: 10px;"):"video"===r?(i.append.apply(i,H()),a.setAttribute("data-type","video"),i.style.cssText="min-width: 0px;padding-left: 10px;"):"image"===r&&(i.append.apply(i,L()),a.setAttribute("data-type","image"),i.style.cssText="min-width: 0px;padding-left: 10px;");a.append(n,i,M(),R()),t[t.length-1].insertAdjacentElement("afterend",a),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:e}}))}}else t.length>=100&&document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The maximum number of options allowed is 100."}}))}}},"survey-range":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="number"][id^="range_min_"]'),r=e.querySelector('input[type="number"][id^="range_max_"]'),n=e.querySelector('input[type="number"][id^="range_step_"]'),i=Array.from(e.querySelectorAll("div.data-range-description-wrapper"));if(!t||!r||!n||""===t.value||""===r.value||""===n.value)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Range Minimum, range maximum, or range step not valid."}})),!1;if(parseFloat(t.value)>=parseFloat(r.value))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The minimum value for the range input must be less than the maximum value for the range input."}})),!1;if(parseFloat(n.value)<0||parseFloat(n.value)>parseFloat(r.value)-parseFloat(t.value))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The step of the range input must be at least one and it must be less than the difference between the maximum and minimum values of the range."}})),!1;if(i.length)for(var o=parseFloat(t.value),s=parseFloat(r.value),d=parseFloat(n.value),u=0,p=i;u<p.length;u++){var l=p[u],c=l.querySelector('input[type="number"][id^="range_point_"]'),v=l.querySelector("div.lexical-wrapper");if(!c)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Could not find the number input for the range point description."}})),!1;if(""===c.value)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Each range point description must have a point associated with it."}})),!1;var m=parseFloat(c.value);if(m<o||m>s||(m-o)%d!=0)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Each range point description must have a valid point associated with it. The point must be greater than or equal to the minimum value for the range input, less than or equal to the maximum value, and be able to be reached by the user."}})),!1;if(!v)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the description for this range point description."}})),!1;var y=v.id;if(!y||!(0,a.getEditorInstances)()[y])return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the description for this range point description."}})),!1}return!0},create:function(e,t){var r="range_resp_".concat(window.crypto.randomUUID()),a="range_min_".concat(window.crypto.randomUUID()),n="range_max_".concat(window.crypto.randomUUID()),i="range_step_".concat(window.crypto.randomUUID()),o=k({type:"div",className:"p-lg"}),s=k({type:"label",attributes:{hidden:"",for:r},className:"mt-2",innerText:r}),d=k({type:"div",attributes:{"data-range-option":""},style:"position:relative;"}),u=k({type:"input",attributes:{type:"range",id:r,name:r,disabled:""},style:"background-size: 50% 100%;"});u.setAttribute("min","0"),u.setAttribute("max","100"),u.setAttribute("step","1"),t&&(u.setAttribute("min",t.rangeMin.toString()),u.setAttribute("max",t.rangeMax.toString()),u.setAttribute("step",t.rangeStep.toString())),d.append(u);var p=J({id:a,label:"Range Input Minimum:",defaultValue:(null==t?void 0:t.rangeMin)?t.rangeMin.toString():"0",placeholder:"Enter the minimum value for the range input..."}),l=J({id:n,label:"Range Input Maximum:",defaultValue:(null==t?void 0:t.rangeMax)?t.rangeMax.toString():"100",placeholder:"Enter the maximum value for the range input..."}),c=J({id:i,label:"Range Input Step:",defaultValue:(null==t?void 0:t.rangeStep)?t.rangeStep.toString():"1",min:0,placeholder:"Enter the step for the range input..."}),v=c.querySelector("input"),m=l.querySelector("input"),h=p.querySelector("input");if(v&&m&&h&&(v.addEventListener("change",Y(v,h,m)),v.addEventListener("change",f),h.addEventListener("change",S),m.addEventListener("change",x)),o.append(s,d,p,l,c),t&&t.rangePointDescriptions.length){N=k({type:"div",className:"flex-row align-center justify-end mt-2",attributes:{role:"toolbar"}});var w=document.createElement("button");t.rangePointDescriptions.length>=5&&w.setAttribute("disabled",""),w.className="filled warning icon-text medium",w.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Remove"><path d="M19 13H5v-2h14v2z"></path></svg>'),w.append(k({type:"span",innerText:"REMOVE POINT DESCRIPTIONS",style:"max-width: none!important;"})),w.addEventListener("click",b),N.append(w);var A=g(N);if(A instanceof HTMLElement)for(var E=A.lastElementChild,q=0;q<t.rangePointDescriptions.length&&E instanceof HTMLElement;q++)E=y(E,t.rangePointDescriptions[q].description,t.rangePointDescriptions[q].point,{min:String(t.rangeMin),max:String(t.rangeMax),step:String(t.rangeStep)});o.append(N,A)}else{var N=k({type:"div",className:"flex-row align-center justify-end mt-2",attributes:{role:"toolbar"}}),_=document.createElement("button");_.className="filled primary icon-text medium",_.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>'),_.append(k({type:"span",innerText:"ADD POINT DESCRIPTIONS",style:"max-width: none!important;"})),_.addEventListener("click",b),N.append(_),o.append(N)}return o},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u="rng_".concat(window.crypto.randomUUID()),p=k({type:"label",attributes:{for:u},className:"bold body1"});d.append(p);var l=k({type:"div",className:"flex-row gap-3 align-center justify-start"}),c=k({type:"div",style:"position:relative;padding: 7px 0px;",className:"grow-1"}),v=k({type:"input",attributes:{type:"range",min:t.rangeMin.toString(),max:t.rangeMax.toString(),step:t.rangeStep.toString(),id:u,name:u}});c.append(v);var m=k({type:"output",attributes:{for:u},className:"h6 fw-regular"});l.append(c,m),d.append(l),e.append(d);var y=(0,a.getRegisterSurveyOption)();if(y)for(var h=0,g=t.rangePointDescriptions;h<g.length;h++){var b=g[h],f=b.point,S=b.description,x="rpdfm_".concat(window.crypto.randomUUID()),w="rpdfm_".concat(window.crypto.randomUUID()),A={"aria-describedby":x,"data-popover":"","data-pelem":"#".concat(x),tabindex:"1","data-force-close":"","data-click":""},E=100*(f-t.rangeMin)/(t.rangeMax-t.rangeMin),q=k({type:"div",className:"rpd-point",style:"left:".concat(E.toString()).concat("%;"),attributes:A}),N="top";E<34?N="top-start":E>68&&(N="top-end");var _=k({type:"div",className:"floating-menu o-xs",style:"padding:4px;border-radius:4px; background-color: var(--background);",attributes:{"data-placement":N,id:x,role:"tooltip"}}),C=k({type:"div",className:"lexical-wrapper",attributes:{id:w,"data-click-capture":"","data-editable":"false"}});_.append(C),c.append(q),d.append(_),y(C);var I=(0,a.getEditorInstances)();I[w]&&(s=I[w].parseEditorState(JSON.parse(S)),I[w].setEditorState(s),I[w].setEditable(!1))}}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),n=e.querySelector('input[type="number"][id^="range_min_"]'),i=e.querySelector('input[type="number"][id^="range_max_"]'),o=e.querySelector('input[type="number"][id^="range_step_"]'),s=Array.from(e.querySelectorAll("div.data-range-description-wrapper"));if(t&&r&&n&&i&&o){var d={type:"survey-range",question:t,required:Boolean(!0===r.checked),rangeMin:parseFloat(n.value),rangeMax:parseFloat(i.value),rangeStep:parseFloat(o.value),rangePointDescriptions:[],VERSION:1};if(s.length)for(var u=0,p=s;u<p.length;u++){var l=p[u],c=l.querySelector('input[type="number"][id^="range_point_"]'),v=l.querySelector("div.lexical-wrapper");if(!c||!v)return null;var m=parseFloat(c.value),y=v.id;if(!y)return null;var h=(0,a.getEditorInstances)()[y];if(!h)return null;d.rangePointDescriptions.push({point:m,description:JSON.stringify(h.getEditorState().toJSON())})}return d}return null}},"survey-date":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="date"][id^="min_date_"]'),r=e.querySelector('input[type="date"][id^="max_date_"]');if(!t||!r)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(t.value&&r.value&&new Date(t.value)>=new Date(r.value))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The minimum date for this date survey question can not be later than the maximum date."}})),!1;var a=e.querySelector('input[type="number"][id^="step_"]');return!(!a||isNaN(parseFloat(a.value))||parseFloat(a.value)<=0)||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid step input. The step input is required, and it must be greater than 0."}})),!1)},create:function(e,t){var r=s("min",void 0,null==t?void 0:t.minDate),a=s("max",void 0,null==t?void 0:t.maxDate),n=J({id:"step_".concat(window.crypto.randomUUID()),defaultValue:(null==t?void 0:t.step)?String(t.step):"1",required:!0,label:"Step:",placeholder:"Enter the step value for the user response..."}),i=r.querySelector("input"),o=a.querySelector("input"),d=n.querySelector("input");d&&o&&i&&(d.addEventListener("change",Y(d,i,o)),i.addEventListener("change",W(i,o)),o.addEventListener("change",Z(i,o))),n.classList.remove("mt-1"),n.classList.add("p-md");var u=k({type:"div",style:"display: block;"});return u.append(r,a,n),u},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var d=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(d),o[r].setEditable(!1)}var u=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),p=s("date_response",{min:t.minDate,max:t.maxDate});u.append(p),e.append(u)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="date"][id^="min_date_"]'),n=e.querySelector('input[type="date"][id^="max_date_"]'),i=e.querySelector('input[type="number"][id^="step_"]');return t&&r&&a&&n&&i?{type:"survey-date",question:t,required:Boolean(!0===r.checked),minDate:Se(a.value)?a.value:void 0,maxDate:Se(n.value)?n.value:void 0,step:parseFloat(i.value),VERSION:1}:null}},"survey-datetime":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="datetime-local"][id^="min_datetime_"]'),r=e.querySelector('input[type="datetime-local"][id^="max_datetime_"]');if(!t||!r)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(t.value&&r.value&&new Date(t.value)>=new Date(r.value))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The minimum datetime for this datetime survey question can not be later than the maximum datetime."}})),!1;var a=e.querySelector('input[type="number"][id^="step_"]');return!(!a||isNaN(parseFloat(a.value))||parseFloat(a.value)<=0)||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid step input. The step input is required, and it must be greater than 0."}})),!1)},create:function(e,t){var r=d("min",void 0,null==t?void 0:t.minDatetime),a=d("max",void 0,null==t?void 0:t.maxDatetime),n=J({id:"step_".concat(window.crypto.randomUUID()),defaultValue:(null==t?void 0:t.step)?String(t.step):"1",required:!0,label:"Step:",placeholder:"Enter the step value for the user response..."}),i=r.querySelector("input"),o=a.querySelector("input"),s=n.querySelector("input");s&&o&&i&&(s.addEventListener("change",Y(s,i,o)),i.addEventListener("change",W(i,o)),o.addEventListener("change",Z(i,o))),n.classList.remove("mt-1"),n.classList.add("p-md");var u=k({type:"div",className:"block p-md"});return u.append(r,a,n),u},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var u=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),p=d("date_response",{min:t.minDatetime,max:t.maxDatetime});u.append(p),e.append(u)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="datetime-local"][id^="min_datetime_"]'),n=e.querySelector('input[type="datetime-local"][id^="max_datetime_"]'),i=e.querySelector('input[type="number"][id^="step_"]');return t&&r&&a&&n&&i?{type:"survey-datetime",question:t,required:Boolean(!0===r.checked),minDatetime:Se(a.value)?a.value:void 0,maxDatetime:Se(n.value)?n.value:void 0,step:parseFloat(i.value),VERSION:1}:null}},"survey-time":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="time"][id^="min_time_"]'),r=e.querySelector('input[type="time"][id^="max_time_"]');if(!t||!r)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(t.value&&r.value){var a=t.value.split(":"),n=a[0],i=a[1],o=a[2],s=r.value.split(":"),d=s[0],u=s[1],p=s[2],l=[parseInt(n),parseInt(i),parseInt(d),parseInt(u),parseInt(o),parseInt(p)],c=l[0],v=l[2],m=l[3],y=l[4],h=l[5];if(!(E(g=l[1])&&E(m)&&A(c)&&A(v)&&q(y)&&q(h)))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Please enter valid minimum and maximum time inputs."}})),!1;if(3600*c+60*g+y>=3600*v+60*m+h)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The minimum time for this time survey question can not be later than the maximum time."}})),!1}else if(t.value){var g,b=t.value.split(":"),f=(n=b[0],i=b[1],o=b[2],[parseInt(n),parseInt(i),parseInt(o)]);if(c=f[0],y=f[2],!E(g=f[1])||!A(c)||!q(y))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Please enter a valid minimum time input."}})),!1}else if(r.value){var S=r.value.split(":"),x=(d=S[0],u=S[1],p=S[2],[parseInt(d),parseInt(u),parseInt(p)]);if(v=x[0],h=x[2],!E(m=x[1])||!A(v)||!q(h))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Please enter a valid maximum time input."}})),!1}var w=e.querySelector('input[type="number"][id^="step_"]');return!(!w||isNaN(parseFloat(w.value))||parseFloat(w.value)<=0)||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid step input. The step input is required, and it must be greater than 0."}})),!1)},create:function(e,t){var r=w("min",void 0,null==t?void 0:t.minTime),a=w("max",void 0,null==t?void 0:t.maxTime),n=J({id:"step_".concat(window.crypto.randomUUID()),defaultValue:(null==t?void 0:t.step)?String(t.step):"60",required:!0,label:"Step:",placeholder:"Enter the step value for the user response..."}),i=r.querySelector("input"),o=a.querySelector("input"),s=n.querySelector("input");s&&o&&i&&(s.addEventListener("change",Y(s,i,o)),i.addEventListener("change",W(i,o)),o.addEventListener("change",Z(i,o))),n.classList.remove("mt-1"),n.classList.add("p-md");var d=k({type:"div",className:"p-lg block"});return d.append(r,a,n),d},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=w("date_response",{min:t.minTime,max:t.maxTime});d.append(u),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="time"][id^="min_time_"]'),n=e.querySelector('input[type="time"][id^="max_time_"]'),i=e.querySelector('input[type="number"][id^="step_"]');return t&&r&&a&&n&&i?{type:"survey-time",question:t,required:Boolean(!0===r.checked),minTime:a.value,maxTime:n.value,step:parseFloat(i.value),VERSION:1}:null}},"survey-image":{validateCreate:function(e){return null===fe(e)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1):!!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]')||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r=L(!0),a=k({type:"div",className:"block p-md"});return a.append.apply(a,r),a},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=L(!1);d.append.apply(d,u),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]');return t&&r?{type:"survey-image",question:t,required:Boolean(!0===r.checked),VERSION:1}:null}},"survey-audio":{validateCreate:function(e){return null===fe(e)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1):!!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]')||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r=U(!0),a=k({type:"div",className:"block p-md"});return a.append.apply(a,r),a},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=U(!1);d.append.apply(d,u),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]');return t&&r?{type:"survey-audio",question:t,required:Boolean(!0===r.checked),VERSION:1}:null}},"survey-video":{validateCreate:function(e){return null===fe(e)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1):!!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]')||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r=H(!0),a=k({type:"div",className:"block p-md"});return a.append.apply(a,r),a},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=H(!1);d.append.apply(d,u),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]');return t&&r?{type:"survey-video",question:t,required:Boolean(!0===r.checked),VERSION:1}:null}},"survey-month":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="month"][id^="min_month_"]'),r=e.querySelector('input[type="month"][id^="max_month_"]');if(!t||!r)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(t.value&&r.value&&new Date(t.value)>=new Date(r.value))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The minimum month for this month survey question can not be later than the maximum month."}})),!1;var a=e.querySelector('input[type="number"][id^="step_"]');return!(!a||isNaN(parseFloat(a.value))||parseFloat(a.value)<=0)||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid step input. The step input is required, and it must be greater than 0."}})),!1)},create:function(e,t){var r=p("min",void 0,null==t?void 0:t.minMonth),a=p("max",void 0,null==t?void 0:t.maxMonth),n=J({id:"step_".concat(window.crypto.randomUUID()),defaultValue:(null==t?void 0:t.step)?String(t.step):"1",required:!0,label:"Step:",placeholder:"Enter the step value for the user response..."}),i=r.querySelector("input"),o=a.querySelector("input"),s=n.querySelector("input");s&&o&&i&&(s.addEventListener("change",Y(s,i,o)),i.addEventListener("change",W(i,o)),o.addEventListener("change",Z(i,o))),n.classList.remove("mt-1"),n.classList.add("p-md");var d=k({type:"div",className:"block"});return d.append(r,a,n),d},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=p("date_response",{min:t.minMonth,max:t.maxMonth});d.append(u),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="month"][id^="min_month_"]'),n=e.querySelector('input[type="month"][id^="max_month_"]'),i=e.querySelector('input[type="number"][id^="step_"]');return t&&r&&a&&n&&i?{type:"survey-month",question:t,required:Boolean(!0===r.checked),minMonth:Se(a.value)?a.value:void 0,maxMonth:Se(n.value)?n.value:void 0,step:parseFloat(i.value),VERSION:1}:null}},"survey-color":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="color"]');return t?!!o.zG.test(t.value)||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid default color input value."}})),!1):(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the color input for this color-survey question."}})),!1)},create:function(e,t){var r=t?t.defaultColor:function(){var e;e="light"===function(){var e=document.querySelector("html");if(e){var t=e.getAttribute("data-mode");return"light"===t||"dark"===t?t:"dark"}return"dark"}()?"background-light-settings-color":"background-dark-settings-color";var t=document.getElementById(e);return t?t.value:"#FFFFFF"}(),a="def_color_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"block p-md"}),i=k({type:"label",className:"body1 bold",attributes:{for:a},innerText:"Default Color:"}),o=k({type:"div",className:"flex-row justify-begin align-center gap-2"}),s=k({type:"input",attributes:{id:a,name:a,value:r,type:"color"},style:"margin-top: 2px;"}),d=k({type:"span",className:"body1",innerText:r});return o.append(s,d),n.append(i,o),n},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u="color_".concat(window.crypto.randomUUID()),p=k({type:"label",className:"body1 bold",attributes:{for:u},innerText:"Color Input:"}),l=k({type:"div",className:"flex-row justify-begin align-center gap-2"}),c=k({type:"input",attributes:{id:u,name:u,value:t.defaultColor,type:"color"},style:"margin-top: 2px;"}),v=k({type:"span",className:"body1",innerText:t.defaultColor});l.append(c,v),d.append(p,l),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="color"][id^="def_color_"]');return t&&r&&a&&o.zG.test(a.value)?{type:"survey-color",question:t,required:Boolean(!0===r.checked),defaultColor:a.value,VERSION:1}:null}},"survey-ranking":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question. Unable to find question state."}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=Array.from(e.querySelectorAll('div[data-option][data-type="survey-paragraph"], div[data-option][data-type="survey-paragraph"],div[data-option][data-type="survey-paragraph"]'));if(t.length<1)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find any options for the ranking question."}})),!1;for(var r=0;r<t.length;r++){var n=t[r],i=n.getAttribute("data-type");if(!be.has(i))return!1;if("survey-paragraph"===i){var o=n.querySelector("div.lexical-wrapper");if(!o)return!1;if(!(u=o.id))return!1;if(!(0,a.getEditorInstances)()[u])return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find one of the paragraph options for the ranking question."}})),!1}else if("audio"===i){var s=n.querySelector("audio"),d=n.querySelector('input[type="text"][name^="audio-input-title"]');if(!(s&&s.getAttribute("data-src")&&d&&d.value))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find one of the audio options for the ranking question."}})),!1}else if("image"===i){var u=n.querySelector("input[data-image-input]").id,p=n.querySelector('input[name="'.concat(u,'-text"]')),l=n.querySelector('input[name="'.concat(u,'-short-description"]')),c=n.querySelector('textarea[name="'.concat(u,'-long-description"]'));if(!(p&&p.value&&l&&c))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find one of the image options for the ranking question."}})),!1}else if("video"===i){var v=n.querySelector("video"),m=n.querySelector('input[type="text"][name^="video-input-title"]'),y=n.querySelector('textarea[name^="video-input-description"]');if(!(v&&v.getAttribute("data-src")&&m&&m.value.length&&y))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find one of the video options for the ranking question."}})),!1}}return!0},create:function(e,t){if(t){o=window.crypto.randomUUID(),s=k({type:"div",attributes:{"data-ranking-container":"","data-drag-container":"",id:"ranking_container_".concat(o)}});for(var r=0,a=t.options;r<a.length;r++){d=a[r];var n=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:i="ranking_option_".concat(window.crypto.randomUUID()),style:"min-width: 0px;","data-option":"","data-type":"survey-paragraph","data-drag-el":"","data-drag-container":"ranking_container_".concat(o)}});switch(u=C(i),n.append(u),p=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),d.type){case"audio":p.append.apply(p,U(void 0,{src:d.src,title:d.title}));break;case"video":p.append.apply(p,H(void 0,{src:d.src,title:d.title,description:d.description,height:d.height}));break;case"image":p.append.apply(p,L(void 0,{src:d.src,shortDescription:d.shortDescription,longDescription:d.longDescription}));break;case"survey-paragraph":l=Q({rteType:"survey-option"},void 0,d.option),p.insertAdjacentElement("beforeend",l);break;default:throw new Error("Something went wrong creating the checkbox HTML.")}n.append(p,M(),R()),s.append(n)}return s}var i,o=window.crypto.randomUUID(),s=k({type:"div",attributes:{"data-ranking-container":"","data-drag-container":"",id:"ranking_container_".concat(o)}}),d=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:i="ranking_option_".concat(window.crypto.randomUUID()),style:"min-width: 0px;","data-option":"","data-type":"survey-paragraph","data-drag-el":"","data-drag-container":"ranking_container_".concat(o)}}),u=C(i);d.append(u);var p=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),l=Q({rteType:"survey-option"});return p.insertAdjacentElement("beforeend",l),d.append(p,M(),R()),s.append(d),s},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),o=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(o),(0,a.getRegisterSurveyQuestion)()(o);var s=(0,a.getEditorInstances)();if(s[r]){var d=s[r].parseEditorState(JSON.parse(t.question));s[r].setEditorState(d),s[r].setEditable(!1)}var u=window.crypto.randomUUID(),p="ranking_container_".concat(u),l=k({type:"div",attributes:{"data-pq-answer":"","data-ranking-container":"","data-drag-container":"",id:p},className:"block p-md"});e.append(l),t.options.forEach((function(e){var t="ranking_option_".concat(window.crypto.randomUUID()),r=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:t,style:"min-width: 0px; border: 2px solid var(--divider); border-radius: 6px; padding: 0px 4px; margin: 2px 0px;","data-option":"","data-pr-option":"","data-drag-el":"","data-type":e.type,"data-drag-container":p}}),o=C(t);r.append(o);var s=k({type:"div",className:"grow-1"});r.append(s),l.append(r);var d=(0,a.getRegisterSurveyOption)();if("survey-paragraph"===e.type){var u="op_id_".concat(window.crypto.randomUUID()),c=k({type:"div",className:"lexical-wrapper rpo",attributes:{id:u,"data-editable":"false","data-max-height":"300",style:"max-height: 300px;"}});if(s.append(c),d){d(c);var v=(0,a.getEditorInstances)();if(v[u]){var m=v[u].parseEditorState(JSON.parse(e.option));v[u].setEditorState(m),v[u].setEditable(!1)}}}else"audio"===e.type?s.insertAdjacentHTML("afterbegin",(0,i.getAudioHTML)(e.src,e.title)):"video"===e.type?s.insertAdjacentHTML("afterbegin",(0,i.getVideoHTML)(e.src,{title:e.title,description:e.description},String(Math.min(e.height,(0,n.CN)()?250:350)))):"image"===e.type&&s.append(xe({src:e.src,shortDescription:e.shortDescription,longDescription:e.longDescription}))}))},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),n=Array.from(e.querySelectorAll('div[data-option][data-type="survey-paragraph"], div[data-option][data-type="survey-paragraph"],div[data-option][data-type="survey-paragraph"]'));if(t&&r&&n.length>=1){for(var i={type:"survey-ranking",question:t,required:Boolean(!0===r.checked),options:[],VERSION:1},o=0;o<n.length;o++){var s=n[o],d=s.getAttribute("data-type");if(!be.has(d))return null;if("survey-paragraph"===d){var u=s.querySelector("div.lexical-wrapper");if(!u)return null;if(!(v=u.id))return null;var p=(0,a.getEditorInstances)()[v];if(!p)return null;i.options.push({type:"survey-paragraph",original_order:o+1,option:JSON.stringify(p.getEditorState().toJSON())})}else if("audio"===d){var l=s.querySelector("audio"),c=s.querySelector('input[type="text"][name^="audio-input-title"]');if(!(l&&l.getAttribute("data-src")&&c&&c.value))return null;i.options.push({type:"audio",original_order:o+1,src:l.getAttribute("data-src"),title:c.value})}else if("image"===d){var v=s.querySelector("input[data-image-input]").id,m=s.querySelector('input[name="'.concat(v,'-text"]')),y=s.querySelector('input[name="'.concat(v,'-short-description"]')),h=s.querySelector('textarea[name="'.concat(v,'-long-description"]'));if(!(m&&m.value&&y&&h))return null;i.options.push({type:"image",original_order:o+1,src:m.value,shortDescription:y.value,longDescription:h.value})}else if("video"===d){var g=s.querySelector("video"),b=s.querySelector('input[type="text"][name^="video-input-title"]'),f=s.querySelector('textarea[name^="video-input-description"]');if(!(g&&g.getAttribute("data-src")&&b&&b.value.length&&f&&g.videoHeight))return null;i.options.push({type:"video",original_order:o+1,src:g.getAttribute("data-src"),title:b.value,description:f.value,height:g.videoHeight})}}return i}return null},addOption:function(){var e=this.closest("section.survey-question");if(e){var t=e.querySelector('div[id^="ranking_container_"]'),r=Array.from(e.querySelectorAll("div[data-option]"));if(r&&r.length<100&&t){var a=t.id,n=r[r.length-1].getAttribute("data-type");if(be.has(n)){var i="ranking_option_".concat(window.crypto.randomUUID()),o=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1",attributes:{id:i,"data-option":"","data-drag-el":"","data-drag-container":a}}),s=C(i),d=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"});if("survey-paragraph"===n){var u=Q({rteType:"survey-option"});d.insertAdjacentElement("beforeend",u),o.setAttribute("data-type","survey-paragraph")}else"audio"===n?(d.append.apply(d,U()),o.setAttribute("data-type","audio"),d.style.cssText="min-width: 0px;padding-left: 10px;"):"video"===n?(d.append.apply(d,H()),o.setAttribute("data-type","video"),d.style.cssText="min-width: 0px;padding-left: 10px;"):"image"===n&&(d.append.apply(d,L()),o.setAttribute("data-type","image"),d.style.cssText="min-width: 0px;padding-left: 10px;");o.append(s,d,M(),R()),r[r.length-1].insertAdjacentElement("afterend",o),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:o}}))}}else r.length>=100&&document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The maximum number of options allowed is 100."}}))}}},"survey-selection":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=Array.from(e.querySelectorAll("div[data-option]"));if(!t.length)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"There must be at least one option for multiple choice inputs."}})),!1;for(var r=0,a=t;r<a.length;r++){var n=a[r],i=n.querySelector('input[type="radio"]'),o=n.querySelector('input[name^="select_option_"]');if(!i||!o)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find one of the select options for this question."}})),!1;if(""===o.value)return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Every select option must have a non-empty value."}})),!1}return!0},create:function(e,t){e.id;var r=[];if(t)for(var a=0,n=t.options;a<n.length;a++){var i=n[a];o=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1 mt-2",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":"survey-paragraph"}}),s=j("select_radio_",i.selected),d=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),u=_(i.option),d.append(u),o.append(s,d,R()),r.push(o)}else{var o=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1 mt-2",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":"survey-paragraph"}}),s=j("select_radio_"),d=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),u=_();d.append(u),o.append(s,d,R()),r.push(o)}var p=k({type:"div",className:"flex-row justify-center",attributes:{"data-include-other":"",id:"wrap_include_other_".concat(window.crypto.randomUUID())}}),l=k({type:"label",className:"checkbox",style:"margin: 0px 6px;"}),c="include_other_".concat(window.crypto.randomUUID()),v=document.createElement("span");v.innerText="Include Other",v.style.cssText="font-size: 1.25rem!important;";var m={type:"checkbox",name:c,id:c};(null==t?void 0:t.include_other)&&(m.checked=!0);var y=k({type:"input",className:"primary medium flex-row align-center",attributes:m});return l.append(y,v),p.append(l),r.push(p),r},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"});e.append(d);var u=function(e){var t,r,a=null===(t=e.filter((function(e){return e.selected})))||void 0===t?void 0:t[0],n=(null==a?void 0:a.option)||void 0,i=Number.isInteger(null==a?void 0:a.index)?null==a?void 0:a.index:void 0,o=Math.min(17*(null===(r=e.map((function(e){return e.option})).sort((function(e,t){return t.length-e.length})))||void 0===r?void 0:r[0].length),400)||200,s=window.crypto.randomUUID(),d="label_".concat(s),u="dropdown_".concat(s),p="select_input_".concat(s),l=k({type:"div",className:"block text-align-left",attributes:{id:d}}),c=k({type:"div",className:"mt-1 flex-row justify-start"}),v=k({type:"div",className:"select"}),m=k({type:"button",className:"select",attributes:{role:"combobox","aria-haspopup":"listbox","aria-controls":u,"aria-labelledby":d,"data-popover":"","data-pelem":"#".concat(u),"data-click":"","aria-expanded":"false",style:"min-width: ".concat(o,"px;")}}),y=k({type:"span",className:"body1",innerText:n||"Select Option"});m.append(y),m.insertAdjacentHTML("beforeend",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="ArrowDropDown"><path d="m7 10 5 5 5-5z"></path></svg>');var h=k({type:"div",attributes:{tabindex:"0",id:u,role:"listbox","data-placement":"bottom"},className:"select-menu o-xs"}),g=k({type:"input",attributes:{type:"text",hidden:"",value:i?String(i):"",name:p,id:p}});h.append(g);for(var b=0;b<e.length;b++){var f=k({type:"button",className:"select-option",attributes:{tabindex:"-1","data-val":String(e[b].index),"aria-selected":Boolean(i===b).toString(),role:"option",style:"width:100%;"},innerText:e[b].option});h.append(f)}return v.append(m,h),c.append(v),[l,c]}(t.options);if(d.append.apply(d,u),t.include_other){var p=k({type:"div",className:"flex-row align-center justify-start gap-1 mt-3",attributes:{"data-other-option":""}}),l=B(!1),c=window.crypto.randomUUID(),v="other_option_".concat(c),m=k({type:"div",className:"text-input block medium grow-1"}),y=k({type:"input",className:"medium",attributes:{name:v,id:v,maxlength:"100",minlength:"1",spellcheck:"true",placeholder:"Enter other value..."}});m.append(y),p.append(l,m),d.append(p)}}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=Array.from(e.querySelectorAll("div[data-option]")),n=e.querySelector('input[id^="include_other_"]');if(t&&r&&a.length>=1&&n){for(var i={type:"survey-selection",question:t,required:Boolean(!0===r.checked),include_other:n.checked,options:[],VERSION:1},o=0,s=0,d=a;s<d.length;s++){var u=d[s],p=u.querySelector('input[type="radio"]'),l=u.querySelector('input[name^="select_option_"]');if(!p||!l)return null;i.options.push({index:o,selected:p.checked,option:l.value}),o+=1}return i}return null},addOption:function(){var e=oe(this);if(e){var t=e.querySelector('div[id^="wrap_include_other_"]');if(t){var r=k({type:"div",className:"flex-row align-center justify-start p-md w-100 gap-1 mt-2",attributes:{id:"option_".concat(window.crypto.randomUUID()),"data-option":"","data-type":"survey-paragraph"}}),a=j("select_radio_"),n=k({type:"div",attributes:{"data-option-middle":""},className:"grow-1",style:"min-width: 0px;"}),i=_();n.append(i),r.append(a,n,R()),t.insertAdjacentElement("beforebegin",r),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:r}}))}}}},"survey-number":{validateCreate:function(e){if(null===fe(e))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid Survey Question"}})),!1;if(!e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'))return document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1;var t=e.querySelector('input[type="number"][id^="survey_num_min_"]'),r=e.querySelector('input[type="number"][id^="survey_num_max_"]'),a=e.querySelector('input[type="number"][id^="survey_num_step_"]');return t&&r?""!==t.value&&""!==r.value&&Number(t.value)>Number(r.value)?(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The required minimum value of the user response must not be greater than the required maximum value of the user response."}})),!1):!(!a||isNaN(parseFloat(a.value))||parseFloat(a.value)<=0)||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"The step input value is invalid. Step input must be greater than 0."}})),!1):(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find whether this question is required."}})),!1)},create:function(e,t){var r="survey_num_".concat(window.crypto.randomUUID()),a="survey_num_min_".concat(window.crypto.randomUUID()),n="survey_num_max_".concat(window.crypto.randomUUID()),i="survey_num_step_".concat(window.crypto.randomUUID()),o=k({type:"div",className:"block p-md"}),s=J({id:r,label:"Response",disabled:!0,placeholder:"User Response would go here ..."}),d=J({id:a,min:0,label:"Minimum:",placeholder:"Enter the minimum value for the user response...",defaultValue:(null==t?void 0:t.min)?String(t.min):void 0}),u=J({id:n,min:0,label:"Maximum:",placeholder:"Enter the maximum value for the user response...",defaultValue:(null==t?void 0:t.max)?String(t.max):void 0}),p=J({id:i,defaultValue:(null==t?void 0:t.step)?String(t.step):"1",min:0,required:!0,label:"Step:",placeholder:"Enter the step value for the user response..."}),l=p.querySelector("input"),c=u.querySelector("input"),v=d.querySelector("input");return l&&c&&v&&(l.addEventListener("change",Y(l,v,c)),v.addEventListener("change",W(v,c)),c.addEventListener("change",Z(v,c))),o.append(s,d,u,p),o},render:function(e,t){var r="rnd_".concat(window.crypto.randomUUID()),n=k({type:"div",className:"lexical-wrapper rpq",attributes:{id:r,"data-editable":"false"}});e.append(n);var i=(0,a.getRegisterSurveyQuestion)();if(i){i(n);var o=(0,a.getEditorInstances)();if(o[r]){var s=o[r].parseEditorState(JSON.parse(t.question));o[r].setEditorState(s),o[r].setEditable(!1)}var d=k({type:"div",attributes:{"data-pq-answer":""},className:"block p-md"}),u=J({label:"Response:",placeholder:"Enter your response here...",id:"urnum_".concat(window.crypto.randomUUID()),min:t.min,max:t.max,step:t.step,disabled:!1});if(d.append(u),"number"==typeof t.min&&isFinite(t.min)){var p=k({type:"p",className:"block body2 mt-1"});p.append(k({type:"span",className:"bold",innerText:"Minimum: "})),p.append(document.createTextNode(t.min.toString())),d.append(p)}if("number"==typeof t.max&&isFinite(t.max)){var l=k({type:"p",className:"block body2 mt-1"});l.append(k({type:"span",className:"bold",innerText:"Maximum: "})),l.append(document.createTextNode(t.max.toString())),d.append(l)}var c=k({type:"p",className:"block body2 mt-1"});c.append(k({type:"span",className:"bold",innerText:"Step: "})),c.append(document.createTextNode(t.step.toString())),d.append(c),e.append(d)}},getCreateInput:function(e){var t=fe(e),r=e.querySelector('input[type="checkbox"][id^="survey-required-checkbox"]'),a=e.querySelector('input[type="number"][id^="survey_num_min_"]'),n=e.querySelector('input[type="number"][id^="survey_num_max_"]'),i=e.querySelector('input[type="number"][id^="survey_num_step_"]');return t&&r&&a&&n&&i?{type:"survey-number",question:t,required:Boolean(!0===r.checked),min:""!==a.value?Number(a.value):void 0,max:""!==n.value?Number(n.value):void 0,step:parseFloat(i.value),VERSION:1}:null}}},D=function(e){return e in T};function k(e){var t=e.type,r=e.className,a=e.style,n=e.attributes,i=e.innerText,o=e.innerHTML,s=document.createElement(t);if(r&&(s.className=r),a&&(s.style.cssText=a),n)for(var d=0,u=Object.keys(n);d<u.length;d++){var p=u[d];s.setAttribute(p,n[p])}return i&&(s.innerText=i),o&&s.insertAdjacentHTML("afterbegin",o),s}function U(e,t){void 0===e&&(e=!1);var r="audio_".concat(window.crypto.randomUUID()),a=document.createElement("label");a.setAttribute("for",r),a.className="bold",a.innerText="Upload Audio File";var n=document.createElement("input");if(n.setAttribute("type","file"),n.setAttribute("accept","audio/*"),n.setAttribute("data-audio-input",""),n.setAttribute("name",r),n.setAttribute("id",r),e&&(a.classList.add("disabled"),n.setAttribute("disabled","")),t){var i=t.src,o=t.title;n.setAttribute("data-default-value",JSON.stringify([{src:i,title:o}]))}n.className="warning";var s=document.createElement("output");return s.setAttribute("for",r),s.className="block",[a,n,s]}function L(e,t){void 0===e&&(e=!1);var r="image_".concat(window.crypto.randomUUID()),a=document.createElement("label");a.setAttribute("for",r),a.className="bold",a.innerText="Upload Image File";var n=document.createElement("input");if(n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.setAttribute("data-image-input",""),n.setAttribute("name",r),n.setAttribute("id",r),e&&(a.classList.add("disabled"),n.setAttribute("disabled","")),t){var i=t.src,o=t.shortDescription,s=t.longDescription;n.setAttribute("data-default-value",JSON.stringify([{src:i,shortDescription:o,longDescription:s}]))}n.className="error";var d=document.createElement("output");return d.setAttribute("for",r),d.className="block",[a,n,d]}function H(e,t){void 0===e&&(e=!1);var r="video_".concat(window.crypto.randomUUID()),a=document.createElement("label");a.setAttribute("for",r),a.className="bold",a.innerText="Upload Video File";var n=document.createElement("input");if(n.setAttribute("type","file"),n.setAttribute("accept","video/*"),n.setAttribute("data-video-input",""),n.setAttribute("name",r),n.setAttribute("id",r),e&&(a.classList.add("disabled"),n.setAttribute("disabled","")),t){var i=t.src,o=t.title,s=t.description,d=t.height;n.setAttribute("data-default-value",JSON.stringify([{src:i,title:o,description:s,height:d}]))}n.className="info";var u=document.createElement("output");return u.setAttribute("for",r),u.className="block",[a,n,u]}function B(e){void 0===e&&(e=!1);var t="checkbox_"+window.crypto.randomUUID(),r=document.createElement("label");r.setAttribute("aria-label","Example Survey Question"),r.classList.add("radio","grow-0","large");var a=document.createElement("input");a.setAttribute("aria-label","Example Survey Question"),a.setAttribute("type","checkbox"),a.setAttribute("name",t),a.setAttribute("id",t),a.classList.add("secondary");var n=document.createElement("span");return n.setAttribute("hidden",""),n.innerText=t,r.append(a,n),e&&(a.checked=!0),r}function R(){var e=document.createElement("button");return e.setAttribute("data-delete-option",""),e.setAttribute("type","button"),e.classList.add("icon","medium"),e.setAttribute("aria-label","Delete Option"),e.setAttribute("disabled",""),e.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Clear"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>'),e}function M(){var e=document.createElement("button");return e.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="MoreVert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'),e.setAttribute("data-option-type",""),e.setAttribute("data-popover",""),e.setAttribute("data-pelem","#change-survey-option-type-menu"),e.setAttribute("data-force-close",""),e.setAttribute("data-click",""),e.setAttribute("type","button"),e.setAttribute("aria-label","Option Type"),e.setAttribute("aria-haspopup","dialog"),e.classList.add("icon","medium"),e}var P={};function O(){var e=this.name;P[e]=this.checked}function K(){void 0!==P[this.name]&&(!0===P[this.name]?this.checked=!1:this.checked=!0),P={}}function j(e,t){void 0===t&&(t=!1);var r="radio_"+window.crypto.randomUUID(),a=document.createElement("label");a.setAttribute("aria-label","Example Survey Question"),a.classList.add("radio","grow-0","large");var i=document.createElement("input");i.setAttribute("aria-label","Example Survey Question"),i.setAttribute("type","radio"),i.setAttribute("name","radio_".concat(e)),i.addEventListener((0,n.CN)()?"touchstart":"mousedown",O),i.addEventListener("click",K),i.classList.add("secondary");var o=document.createElement("span");return o.setAttribute("hidden",""),o.innerText=r,a.append(i,o),t&&(i.checked=!0),a}var V={"survey-question":'<p class="lex-p" style="text-align: left; margin: 6px 0px 6px 0px; padding: 0px 0px 0px 0px !important; border-radius: 0px 0px 0px 0px; border-color: transparent transparent transparent transparent; border-width: 0px 0px 0px 0px; border-style: none none none none;" data-v="1" dir="ltr" data-e-indent="0"><span style="font-size: 1rem; line-height: 1.5; letter-spacing: 0.00938em; white-space: pre-wrap;" data-v="1">Enter your survey question here...</span></p>',"survey-option":'<p class="lex-p" style="text-align: left; margin: 6px 0px 6px 0px; padding: 0px 0px 0px 0px !important; border-radius: 0px 0px 0px 0px; border-color: transparent transparent transparent transparent; border-width: 0px 0px 0px 0px; border-style: none none none none;" data-v="1" dir="ltr" data-e-indent="0"><span style="font-size: 1rem; line-height: 1.5; letter-spacing: 0.00938em; white-space: pre-wrap;" data-v="1">Enter an option for the survey question here...</span></p>',"range-description":'<p class="lex-p" style="text-align: left; margin: 6px 0px 6px 0px; padding: 0px 0px 0px 0px !important; border-radius: 0px 0px 0px 0px; border-color: transparent transparent transparent transparent; border-width: 0px 0px 0px 0px; border-style: none none none none;" data-v="1" dir="ltr" data-e-indent="0"><span style="font-size: 1rem; line-height: 1.5; letter-spacing: 0.00938em; white-space: pre-wrap;" data-v="1">Enter a description for  a point in the range here...</span></p>',"survey-short-blog":'<p class="lex-p" style="text-align: left; margin: 6px 0px 6px 0px; padding: 0px 0px 0px 0px !important; border-radius: 0px 0px 0px 0px; border-color: transparent transparent transparent transparent; border-width: 0px 0px 0px 0px; border-style: none none none none;" data-v="1" dir="ltr" data-e-indent="0"><span style="font-size: 1rem; line-height: 1.5; letter-spacing: 0.00938em; white-space: pre-wrap;" data-v="1">Enter a short blog response here...</span></p>'},z={"survey-question":"block lexical-wrapper mt-2","survey-option":"block lexical-wrapper","range-description":"block lexical-wrapper mt-1","survey-short-blog":"block lexical-wrapper mt-1"},F={"survey-question":"min-height: 100px; overflow-y:auto; resize: vertical!important; max-height:400px;","survey-option":"min-height: 70px; overflow-y:auto; resize: vertical!important; max-height:400px;","range-description":"max-height: 250px; min-height: 70px; overflow-y:auto; resize: vertical!important; max-height:400px;","survey-short-blog":"max-height: 250px; min-height: 100px; overflow-y:auto; resize: vertical!important; max-height:400px;"};function Q(e,t,r){var n=e.rteType;void 0===t&&(t=!0);var i="wrapper_"+window.crypto.randomUUID(),o=document.createElement("div");o.classList.add("lexical-wrapper","survey-q-wrap","mt-2"),o.style.setProperty("overflow","hidden"),"survey-short-blog"!==n&&o.setAttribute("data-display-only","");var s=V[n],d=z[n],u=F[n];return(0,a.getCommentImplementation)(i,Boolean("survey-short-blog"===n&&t),s,{type:n,wrapperStyle:d,rteStyle:u,lexicalState:r||void 0})}function J(e){var t=e.id,r=e.min,a=e.max,n=e.defaultValue,i=e.label,o=e.placeholder,s=e.disabled,d=void 0!==s&&s,u=e.required,p=void 0!==u&&u,l=e.step,c="number"==typeof l?l:1,v=k({type:"div",className:"input-group block mt-1"}),m=k({type:"label",attributes:{for:t},innerText:i});d&&m.classList.add("disabled");var y=k({type:"div",className:"mt-1 number-input medium"}),h=k({type:"input",attributes:{type:"number",name:t,id:t,autocomplete:"off",spellcheck:"false",autocapitalize:"off"}});return h.setAttribute("step",String(c)),p&&h.setAttribute("required",""),d&&h.setAttribute("disabled",""),"number"==typeof r&&h.setAttribute("min",String(r)),"number"==typeof a&&h.setAttribute("max",String(a)),n&&h.setAttribute("value",n),o&&h.setAttribute("placeholder",o),y.append(h,function(e){void 0===e&&(e=!1);var t=k({type:"button",attributes:{type:"button","aria-label":"Increase Input","data-increase":""},className:"icon large"});return t.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"></path></svg>'),e&&t.setAttribute("disabled",""),t}(),function(e){void 0===e&&(e=!1);var t=k({type:"button",attributes:{type:"button","aria-label":"Decrease Input","data-decrease":""},className:"icon large"});return t.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24"><path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path></svg>'),e&&t.setAttribute("disabled",""),t}()),v.append(m,y),v}function Y(e,t,r){return function(){isNaN(parseFloat(e.step))||(t.step=e.value,r.step=e.value)}}function W(e,t){return function(){var r=e.value;r&&(t.min=r)}}function Z(e,t){return function(){var r=t.value;r&&(e.max=r)}}var G=function(){return document.body.dispatchEvent(new CustomEvent("POLL_UPDATE"))},X=void 0,$=void 0;function ee(){return document.getElementById("survey-question-type-dialog")}function te(){return document.getElementById("change-survey-option-type-menu")}function re(){return X}function ae(e){X=e}function ne(e){$=e}function ie(){return $}function oe(e){return e.closest("section.survey-question")}function se(){var e=this.id;if(X!==e){e&&(X=e);var t=this.querySelector("button[data-question-type]");if(t){var r=t.getAttribute("data-val");if(r){var a=ee();if(a){Array.from(a.querySelectorAll('input[name="survey-question-type"]')).forEach((function(e){e.checked=Boolean(String(e.getAttribute("value"))===r)}));var n=a.querySelector('output[form="question-type-form"]');n&&(n.innerHTML="",n.insertAdjacentHTML("afterbegin",ue(r)))}}}}}function de(){var e=this.id;e&&($=e)}function ue(e){return D(e)?"survey-short-answer"===e?'<p class="mt-2 bold">Short Answer:</p>\n      <p class="mt-1">\n        Allow survey respondents to respond to the survey question with a short answer (between 1 and 100 characters).\n      </p>':"survey-paragraph"===e?'<p class="mt-2 bold">Paragraph:</p>\n      <p class="mt-1">\n        Allow survey respondents to respond to the survey question with a longer answer (between 1 and 500 characters).\n      </p>':"survey-short-blog"===e?'<p class="mt-2 bold">Blog:</p>\n      <p class="mt-1">\n        Allow survey respondents to respond to the survey question with a short blog. Survey respondents will be able to respond the survey question by with a short blog post.\n      </p>':"survey-multiple-choice"===e?'<p class="mt-2 bold">Multiple Choice:</p>\n      <p class="mt-1">\n        For the survey question, add multiple options from which the survey respondent can select one option as their answer to the question.\n      </p>':"survey-checkbox"===e?'<p class="mt-2 bold">Checkbox:</p>\n      <p class="mt-1">\n        For the survey question, add multiple options from which the survey respondent can select multiple options as their answer to the question.\n      </p>':"survey-range"===e?'<p class="mt-2 bold">Range:</p>\n      <p class="mt-1">\n        For the survey question, add a range slider \n      </p>':"survey-date"===e?'<p class="mt-2 bold">Date:</p>\n      <p class="mt-1">\n        Allow the survey respondent to input a date as their answer to a question. You may constrain the date by adding a maximum and minimum value for the date.\n      </p>':"survey-datetime"===e?'<p class="mt-2 bold">Datetime:</p>\n      <p class="mt-1">\n        Allow the survey respondent to input a date with a time as their answer to a question. You may constrain the datetime by adding a maximum and minimum value for the datetime.\n      </p>':"survey-time"===e?'<p class="mt-2 bold">Time:</p>\n      <p class="mt-1">\n        Allow the survey respondent to input a time as their answer to a question. You may constrain the datetime by adding a maximum and minimum value for the time.\n      </p>':"survey-image"===e?'<p class="mt-2 bold">Image:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question with an image.\n      </p>':"survey-audio"===e?'<p class="mt-2 bold">Audio:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question with an audio recording.\n      </p>':"survey-video"===e?'<p class="mt-2 bold">Video:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question with a video.\n      </p>':"survey-month"===e?'<p class="mt-2 bold">Month:</p>\n      <p class="mt-1">\n        Allow the survey respondent to respond to the survey question with a month input.\n      </p>':"survey-color"===e?'<p class="mt-2 bold">Color:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question with a color.\n      </p>':"survey-ranking"===e?'<p class="mt-2 bold">Ranking:</p>\n      <p class="mt-1">\n        Allow the respondent to answer survey question by ranking various options shown to them.\n      </p>':"survey-selection"===e?'<p class="mt-2 bold">Selection:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question by selecting an option from a dropdown menu.\n      </p>':"survey-number"===e?'<p class="mt-2 bold">Number:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question by selecting an option from a dropdown menu.\n      </p>':"survey-week"===e?'<p class="mt-2 bold">Week:</p>\n      <p class="mt-1">\n        Allow the respondent to answer the survey question by selecting an option from a dropdown menu.\n      </p>':"":""}function pe(e){var t=oe(this),r=ee();t&&r&&se.bind(t)()}function le(){var e=this.nextElementSibling,t=this.querySelector('input[name="survey-question-type"]:checked');e&&"OUTPUT"===e.nodeName&&t&&(e.innerHTML="",e.insertAdjacentHTML("afterbegin",ue(t.value)))}function ce(e){e.preventDefault(),e.stopPropagation();var t=this.closest("div.dialog-wrapper"),r=this.querySelector('input[name="survey-question-type"]:checked');if(t&&r&&r.parentElement){var i=r.parentElement.querySelector("span.fw-regular.body-1"),o=r.value;if(D(o)&&i){var s=i.innerText,d=document.getElementById(String(X));if(d){var u=d.querySelector("button[data-question-type]");if(u){var p=u.querySelector("span");p&&(p.innerText=s);var l=structuredClone(u.getAttribute("data-val"));u.setAttribute("data-val",o),l!==o&&function(e,t,r){if(e.classList.remove("invalid-q"),D(r)&&D(t)){var n=e.querySelector("div[data-edit-survey-question]");if(n){new Set(["survey-short-answer","survey-paragraph","survey-short-blog","survey-multiple-choice","survey-checkbox","survey-range"]).has(t)&&Array.from(n.querySelectorAll("div.lexical-wrapper")).forEach((function(e){var t=e.id;t&&(0,a.clearEditor)(t)})),n.innerHTML="";var i=T[r].create(e);if(Array.isArray(i)?n.append.apply(n,i):n.append(i),T[r].hasOwnProperty("addOption")){var o=k({type:"div",className:"flex-row align-center justify-center p-md"}),s=k({type:"button",attributes:{type:"button","data-add-option":""},className:"medium icon-text text info"});s.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>'),s.append(document.createTextNode("Add Option")),s.addEventListener("click",T[r].addOption),o.append(s),n.append(o)}document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:e}}))}}}(d,String(l),o),(0,n.zU)(t)}}}}}function ve(){var e=oe(this);if(e){var t=e.querySelector("button[data-question-type]");if(t){var r=String(t.getAttribute("data-val"));D(r)&&(e.insertAdjacentElement("afterend",ge(r)),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:e.parentElement||void 0}})))}}}function me(){var e=oe(this);if(e){var t=e.querySelector("button[data-question-type]");if(t){var r=String(t.getAttribute("data-val"));if(D(r)){var a=T[r].getCreateInput(e);a?(e.insertAdjacentElement("afterend",ge(r,a)),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:e.parentElement||void 0}}))):document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong getting the question state."}}))}}}}function ye(e){var t=oe(this),r=te(),a=this.closest("div[data-option]");if(t&&a&&r){var n=t.id;n&&ae(n);var i=a.id;i&&ne(i);var o=a.getAttribute("data-type");be.has(String(o))&&Array.from(r.querySelectorAll("button")).forEach((function(e){String(e.getAttribute("data-val"))===o?e.setAttribute("aria-selected","true"):e.setAttribute("aria-selected","false")}))}}var he={"survey-short-answer":"Short Answer","survey-paragraph":"Paragraph","survey-short-blog":"Short Blog","survey-multiple-choice":"Multiple Choice","survey-checkbox":"Checkbox","survey-range":"Range","survey-date":"Date","survey-datetime":"Datetime","survey-time":"Time","survey-image":"Image","survey-audio":"Audio","survey-video":"Video","survey-month":"Month","survey-color":"Color","survey-ranking":"Ranking","survey-selection":"Selection","survey-number":"Number","survey-week":"Week"};function ge(e,t){var r="question_".concat(window.crypto.randomUUID()),a=k({type:"section",className:"survey-question mt-3",attributes:{"data-drag-container":"survey-questions-container","data-drag-el":"",id:r}}),i=k({type:"div",className:"flex-row justify-between align-center"}),o=k({type:"div",className:"drag-container",attributes:{"data-drag":"#".concat(r),tabindex:"0"}});o.insertAdjacentHTML("afterbegin",' <svg class="custom-survey t-normal drag" style="transform: rotate(90deg);" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path stroke="currentColor" d="M8.5 10a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm0 7a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm7-10a2 2 0 1 0-2-2 2 2 0 0 0 2 2Zm-7-4a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm7 14a2 2 0 1 0 2 2 2 2 0 0 0-2-2Zm0-7a2 2 0 1 0 2 2 2 2 0 0 0-2-2Z"></path></svg>'),i.append(o);var s=k({type:"div",className:"flex-row justify-center grow-1"}),d=k({type:"button",attributes:{type:"button","data-hide-question":"","aria-label":"Collapse / Show the Survey Question"},className:"icon-text text warning medium"});d.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="KeyboardArrowUp" style=""><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg>'),d.append(k({type:"span",innerText:"COLLAPSE"})),s.append(d);var u=k({type:"span",className:"body1 bold",style:"margin-right: 0.5rem; margin-left: auto;",innerText:"Type:"}),p=k({type:"button",className:"select small",style:"min-width: 175px;",attributes:{"data-question-type":"","data-click":"",type:"button","aria-haspopup":"dialog","data-val":e,"data-dialog":"survey-question-type-dialog"}});(0,n.CN)()?p.addEventListener("touchstart",ye):p.addEventListener("mousedown",ye);var l=k({type:"span",className:"body1",innerText:String(he[e])});p.append(l),p.insertAdjacentHTML("beforeend",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="ArrowDropDown"><path d="m7 10 5 5 5-5z"></path></svg>'),i.append(o,s,u,p),a.append(i),a.insertAdjacentElement("beforeend",Q({rteType:"survey-question"},void 0,null==t?void 0:t.question));var c=k({type:"div",attributes:{"data-edit-survey-question":""},className:"edit-survey"});if(D(e)){if(t&&t.type===e){var v=T[e].create(a,t);Array.isArray(v)?c.append.apply(c,v):c.append(v)}else v=T[e].create(a),Array.isArray(v)?c.append.apply(c,v):c.append(v);if(T[e].hasOwnProperty("addOption")){var m=k({type:"div",className:"flex-row align-center justify-center p-md"}),y=k({type:"button",attributes:{type:"button","data-add-option":""},className:"medium icon-text text info"});y.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>'),y.append(document.createTextNode("Add Option")),y.addEventListener("click",T[e].addOption),m.append(y),c.append(m)}}a.append(c);var h=k({type:"div",className:"survey-question-footer hz-scroll"}),g=k({type:"div",attributes:{role:"toolbar"},style:"margin-right: 6px; padding-right: 6px; border-right: 2px solid var(--text-primary);"}),b={type:"button","aria-label":"Duplicate Survey Question","aria-describedby":"duplicate-survey-tooltip","data-duplicate-question":""};(0,n.CN)()||Object.assign(b,{"data-popover":"","data-pelem":"#duplicate-survey-tooltip","data-mouse":""});var f=k({type:"button",className:"icon medium text warning",attributes:b});f.insertAdjacentHTML("afterbegin",'<svg viewBox="0 0 512 512" title="clone" focusable="false" inert tabindex="-1"><path d="M64 464H288c8.8 0 16-7.2 16-16V384h48v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h64v48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM224 304H448c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H224c-8.8 0-16 7.2-16 16V288c0 8.8 7.2 16 16 16zm-64-16V64c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V288c0 35.3-28.7 64-64 64H224c-35.3 0-64-28.7-64-64z"></path></svg>'),f.addEventListener("click",me);var S={type:"button","aria-label":"Add Survey Question","aria-describedby":"add-survey-tooltip","data-add-question":""};(0,n.CN)()||Object.assign(S,{"data-popover":"","data-pelem":"#add-survey-tooltip","data-mouse":""});var x=k({type:"button",className:"icon medium text success",attributes:S});x.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>'),x.addEventListener("click",ve);var w={"data-delete-survey":"",type:"button","aria-label":"Delete Question",disabled:""};(0,n.CN)()||(w=I(I({},w),{"aria-described-by":"delete-question-tool","data-popover":"","data-pelem":"#delete-question-tool","data-mouse":""}));var A=k({type:"button",className:"icon medium text error",attributes:w});A.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg>');var E=k({type:"label",className:"checkbox",style:"margin: 0px 6px;"}),q="survey-required-checkbox_".concat(window.crypto.randomUUID()),N=document.createElement("span");N.innerText="Required",N.style.cssText="font-size:1.25rem!important;";var _=k({type:"input",className:"primary medium flex-row align-center",attributes:{type:"checkbox",name:q,id:q}});return(null==t?void 0:t.required)&&(_.checked=!0),E.append(_,N),g.append(f,x,A),h.append(g,E),a.append(h),a}var be=new Set(["survey-paragraph","image","audio","video"]);function fe(e){var t=e.querySelector('div[data-rich-text-editor][data-type="survey-question"]');if(t){var r=t.closest("div.lexical-wrapper");if(r){var n=r.id;if(n){var i=(0,a.getEditorInstances)()[n];if(i)return JSON.stringify(i.getEditorState().toJSON())}}}return null}function Se(e){try{if(!e.length)return!1;var t=new Date(e);return Boolean(t)}catch(e){return console.error(e),!1}}function xe(e){var t=e.src,r=e.shortDescription,a=e.longDescription,n=document.createElement("img");return n.setAttribute("src",t),n.style.cssText="max-height: 200px;width: auto;height: auto;max-width:100%;margin: 0px 0px!important;",n.setAttribute("alt",r),n.setAttribute("data-text",a),n}new Set(["survey-short-answer","survey-paragraph","survey-short-blog","survey-multiple-choice","survey-checkbox","survey-range","survey-date","survey-datetime","survey-time","survey-image","survey-audio","survey-video","survey-month","survey-color","survey-ranking"]);var we=new Set(["survey-multiple-choice","survey-checkbox","survey-ranking"]),Ae=null;function Ee(e){var t=this.closest("section");if(t){var r=t.nextElementSibling;Array.from(t.querySelectorAll("div[data-rich-text-editor]")).forEach((function(e){var t=e.closest("div.lexical-wrapper");if(t){var r=t.id;r&&(0,a.clearEditor)(r)}}));var n=t.id,i=new Set(Array.from(t.querySelectorAll("div[data-option]")).map((function(e){return e.id})).filter((function(e){return null!==e})));n&&re()===n&&ae(void 0),i.has(String(ie()))&&ne(void 0),t.remove(),r&&"DIV"===r.nodeName&&r.hasAttribute("data-get-question-indicator")&&r.remove(),G()}}function qe(e){var t=this.closest("section.survey-question"),r=this.querySelector("svg"),a=this.querySelector("span");if(t&&r&&a){var n=t.querySelector("div[data-edit-survey-question]");n&&(n.hasAttribute("hidden")?(n.removeAttribute("hidden"),a.innerText="COLLAPSE",r.style.cssText="",this.classList.add("warning"),this.classList.remove("success")):(n.setAttribute("hidden",""),a.innerText="SHOW",r.style.cssText="transform: rotate(180deg);",this.classList.add("success"),this.classList.remove("warning")))}}function Ne(){var e=this.getAttribute("data-val"),t=$?document.getElementById($):null,r=X?document.getElementById(X):null;if(t&&r&&be.has(e)){var n=t.getAttribute("data-type"),i=r.querySelector("button[data-question-type]");if(i&&be.has(n)){var o=i.getAttribute("data-val");if(we.has(o)){var s=t.querySelector("div[data-option-middle]");if(s){if("survey-paragraph"===n){var d=s.querySelector("div.lexical-wrapper");if(d){var u=d.id;u&&(0,a.clearEditor)(u)}}s.innerHTML="","survey-paragraph"===e?(s.insertAdjacentElement("beforeend",Q({rteType:"survey-option"})),s.style.cssText="min-width: 0px;",t.setAttribute("data-type","survey-paragraph")):"audio"===e?(s.append.apply(s,U()),t.setAttribute("data-type","audio"),s.style.cssText="min-width: 0px; padding-left: 10px;"):"video"===e?(s.append.apply(s,H()),t.setAttribute("data-type","video"),s.style.cssText="min-width: 0px; padding-left: 10px;"):"image"===e&&(s.append.apply(s,L()),t.setAttribute("data-type","image"),s.style.cssText="min-width: 0px; padding-left: 10px;"),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:r}})),document.dispatchEvent(new CustomEvent("HIDE_OPEN_POPOVER",{detail:{str:"#change-survey-option-type-menu"}}));var p=te();p&&(p.style.display="none"),G()}}}}}function _e(e){var t=this.closest("section.survey-question"),r=this.closest("div[data-option]");r&&t&&Array.from(t.querySelectorAll("div[data-option]")).length>=2&&(Array.from(r.querySelectorAll("div.lexical-wrapper")).forEach((function(e){var t=e.id;t&&(0,a.clearEditor)(t)})),r.remove(),je())}function Ce(e){return!0}function Ie(e){void 0===e&&(e=!1);var t=document.getElementById("survey-title"),r=document.getElementById("survey-uuid"),n=(0,a.getEditorInstances)()["survey-description"],i=JSON.stringify(n.getEditorState().toJSON()),o=document.querySelector('input[name="survey-image-text"]'),s=Array.from(document.querySelectorAll('section.survey-question[data-drag-container="survey-questions-container"]')),d=document.getElementById("survey-deadline");if(!t||!t.checkValidity())return t&&!e&&t.scrollIntoView(),void(e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid survey title. The survey title must be between 1 and 100 characters in length."}})));if(!n){var u=document.getElementById("survey-description");return u&&!e&&u.scrollIntoView(),void(e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the survey description."}})))}if(!o||!o.value.startsWith("https://image.storething.org/frankmbrown"))return o&&!e&&o.scrollIntoView(),void(e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find the survey image. An image for the survey is required."}})));if(s.length)if(r&&r.value){if(!d||!Se(d.value)||!d.checkValidity())return d&&!e&&d.scrollIntoView(),void(e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Invalid survey deadline value."}})));for(var p=[],l=0,c=s;l<c.length;l++){var v=c[l],m=v.querySelector("button[data-question-type]");if(!m)return void(e||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find out what kind of question this question is."}})),v.classList.add("invalid-q"),v.scrollIntoView()));var y=m.getAttribute("data-val");if(!T.hasOwnProperty(String(y)))return void(e||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unrecognized question type."}})),v.classList.add("invalid-q"),v.scrollIntoView()));if(!T[String(y)].validateCreate(v))return void(e||(v.classList.add("invalid-q"),v.scrollIntoView()));e&&document.addEventListener("DISPATCH_SNACKBAR",Ce,!0);var h=T[String(y)].getCreateInput(v);if(e&&document.removeEventListener("DISPATCH_SNACKBAR",Ce,!0),!h)return void(e||(document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong getting this question state."}})),v.classList.add("invalid-q"),v.scrollIntoView()));v.classList.contains("invalid-q")&&v.classList.remove("invalid-q"),p.push(h)}if(p.filter((function(e){return e.required})).length>=1)return{title:t.value,description:i,image:o.value,questions:p,survey_uuid:r.value,deadline:d.value};e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"At least one survey question must be required."}}))}else e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find survey unique identifier."}}));else e||document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Unable to find any questions for the survey. At least 1 question is required."}}))}function Te(){var e=Ie(),t=document.querySelector("section#page-head"),r=document.querySelector("section#required-survey-attributes"),n=document.querySelector("section#survey-questions-wrapper"),i=document.querySelector('output[form="survey-form"]'),o=(0,a.getEditorInstances)();if(e&&t&&r&&n&&i){if(!i.hasAttribute("hidden"))return;var s=e.title,d=e.description,u=e.questions,p=k({type:"h1",className:"page-title",innerText:s}),l="id_".concat(window.crypto.randomUUID()),c=k({type:"div",className:"lexical-wrapper example-render hz-scroll mt-2",attributes:{"data-rich-text-editor":"","data-type":"full","data-editable":"false",id:l}});(0,a.registerFullEditor)(c,!1);var v=o[l].parseEditorState(JSON.parse(d));o[l].setEditorState(v),o[l].setEditable(!1);var m=document.createElement("div");m.className="block mt-2";var y=k({type:"button",className:"filled warning icon-text medium"});y.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>'),y.append(new Text("EDIT SURVEY")),y.addEventListener("click",De),m.append(y),i.append(p,m,c);for(var h=0;h<u.length;h++){var g=u[h],b=g.type,f=k({type:"section",className:"mt-3 survey-question",attributes:{id:"question-".concat(String(h+1))}}),S=k({type:"div",className:"flex-row justify-between align-center navbar-sticky-transition",style:"background-color: var(--background); opacity: 1; position: sticky; top: var(--navbar-height); z-index: 2;"}),x=k({type:"h2",className:"h3 bold",innerText:"Question ".concat(String(h+1))}),w="qw_".concat(window.crypto.randomUUID()),A='<button type="button" class="small icon-text text warning" data-hide-show="" data-el="#'.concat(w,'">\n  <svg data-arrow="" focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="KeyboardArrowUp"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg>\n  <span data-hide="">HIDE</span>\n  <span data-show="" hidden="">SHOW</span>\n</button>');S.append(x),S.insertAdjacentHTML("beforeend",A),f.append(S);var E=k({type:"div",attributes:{id:w}});if(T[b].render(E,g),!g.required){var q=k({type:"div",className:"survey-question-footer"}),N=k({type:"label",className:"checkbox",style:"margin: 0px 6px;"}),_="confirm_response_question_".concat(String(h+1)),C=document.createElement("span");C.innerText="Confirm Response",C.style.cssText="font-size:1.25rem!important;",N.append(k({type:"input",className:"primary medium flex-row align-center",attributes:{type:"checkbox",name:_,id:_,checked:""}}),C),q.append(N),E.append(q)}f.append(E),i.append(f)}[t,r,n].forEach((function(e){return e.setAttribute("hidden","")})),i.removeAttribute("hidden"),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:i}})),window.scrollTo(0,0)}}function De(){var e=document.querySelector("section#page-head"),t=document.querySelector("section#required-survey-attributes"),r=document.querySelector("section#survey-questions-wrapper"),n=document.querySelector('output[form="survey-form"]'),i=(0,a.getEditorInstances)();e&&t&&r&&n&&(n.querySelectorAll("div.lexical-wrapper").forEach((function(e){var t=e.id;t&&i[t]&&(0,a.clearEditor)(t)})),n.setAttribute("hidden",""),e.removeAttribute("hidden"),t.removeAttribute("hidden"),r.removeAttribute("hidden"),n.innerHTML="")}function ke(e){e.preventDefault(),e.stopPropagation();var t=Ie();if(t){var r=t.title,a=t.description,i=t.questions,o=t.image,s=t.survey_uuid,d=t.deadline,u=JSON.stringify({title:r,description:a,questions:i,image:o,survey_uuid:s,deadline:d});(0,n.Mr)("Submitting Survey..."),fetch("/projects/create-a-survey",{method:"POST",body:u,headers:{"Content-Type":"application/json","X-CSRF-Token":(0,n.Qm)()}}).then((function(e){if(200!==e.status)throw new Error("Network request");(0,n.xw)(),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"success",message:"Successfully submitted the survey."}})),setTimeout((function(){if(window.htmx){var e=document.createElement("div"),t=document.getElementById("PAGE");t&&t.append(e),e.setAttribute("hx-get","/surveys"),e.setAttribute("hx-target","#PAGE"),e.setAttribute("hx-push-url","true"),e.setAttribute("hx-indicator","#page-transition-progress"),e.setAttribute("hx-trigger","click"),window.htmx.process(e),window.htmx.trigger(e,"click")}}),1e3)})).catch((function(e){console.error(e),(0,n.xw)(),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong saving the survey."}}))}))}}function Ue(){var e=Ie();if(e){var t={title:e.title,description:e.description,image:e.image,questions:e.questions,survey_uuid:e.survey_uuid,deadline:e.deadline};(0,n.Mr)("Saving Survey..."),fetch("/api/save-survey",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":(0,n.Qm)()},body:JSON.stringify(t)}).then((function(t){if(200!==t.status)throw new Error("Something went wrong saving the survey state.");(0,n.xw)(),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"success",message:"Successfully saved survey! You can re-download it later using the DOWNLOAD button near the bottom of the page."}})),Ae=JSON.stringify(e,null,"")})).catch((function(e){(0,n.xw)(),console.error(e),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong saving the survey state."}}))}))}}var Le=void 0;function He(e){if(Ae){var t=Ie(!0);if(void 0!==t&&JSON.stringify(t,null,"").length===Ae.length)return}e.stopPropagation();var r=document.getElementById("confirm-dialog");if(r){Le={page:window.location.pathname,element:this};var a=r.querySelector("button[data-confirm]"),i=r.querySelector("button[data-cancel]");a&&i&&(a.addEventListener("click",Be),i.addEventListener("click",Re),(0,n.Dh)(r))}}function Be(e){var t=this.closest("div.dialog-wrapper");t&&Le&&(window.htmx&&window.htmx.trigger(Le.element,"click"),(0,n.zU)(t))}function Re(e){var t=this.closest("div.dialog-wrapper");t&&(Le=void 0,(0,n.zU)(t))}function Me(e){if(Ae){var t=Ie(!0);if(void 0!==t&&JSON.stringify(t,null,"").length===Ae.length)return}return e.preventDefault(),e.returnValue=!0,!0}function Pe(e){var t=this.closest("div.dialog-wrapper");e.preventDefault(),e.stopPropagation();var r=this.querySelector("input:checked");if(!r)return(0,n.zU)(t),void document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"You must select a survey to download."}}));var i=r.value;if(!Number.isInteger(parseInt(i)))return(0,n.zU)(t),void document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong downloading the survey."}}));fetch("/api/download-survey/".concat(encodeURIComponent(i)),{headers:{"Content-Type":"application/json","X-CSRF-Token":(0,n.Qm)()}}).then((function(e){if(200!==e.status)throw new Error("Something went wrong downloading the survey.");return e.json()})).then((function(e){(0,n.Mr)("Updating survey...");try{!function(e){var t=document.getElementById("survey-title"),r=(0,a.getEditorInstances)()["survey-description"],n=document.getElementById("survey-image"),i=document.getElementById("survey-questions-container"),o=document.getElementById("survey-uuid"),s=document.getElementById("survey-deadline");if(t&&r&&n&&i&&o&&s){t.value=e.title,o.value=e.survey_uuid,s.value=e.deadline;var d=document.querySelector("output[survey-image]");d&&(d.innerHTML=""),n.setAttribute("data-default-value",JSON.stringify([{src:e.image,shortDescription:e.title+" - Survey Image"}]));var u=r.parseEditorState(e.description);r.setEditorState(u),i.querySelectorAll("div.lexical-wrapper").forEach((function(e){var t=e.id;t&&(0,a.getEditorInstances)()[t]&&(0,a.clearEditor)(t)})),i.innerHTML="",e.questions.forEach((function(e){if(T[e.type]){var t=ge(e.type,e);i.append(t)}})),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:i}}))}}(e),(0,n.xw)(),(0,n.zU)(t),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"success",message:"Successfully downloaded saved survey!"}}))}catch(e){console.error(e),(0,n.xw)(),(0,n.zU)(t),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong downloading the saved survey!"}}))}var r=Ie();Ae=void 0===r?null:JSON.stringify(r,null,""),(0,n.zU)(t)})).catch((function(e){console.error(e),document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:"Something went wrong downloading the survey."}}))}))}function Oe(e){"s"===e.key.toLowerCase()&&e.ctrlKey&&(e.preventDefault(),Ue())}var Ke='[hx-push-url="true"]:not([data-force-navigate]):not([type="submit"]), [href^="/"]:not([href^="#"])';function je(){var e=document.getElementById("survey-form");e&&e.addEventListener("submit",ke);var t=ee();if(t){var r=t.querySelector("form");r&&(r.addEventListener("submit",ce),r.addEventListener("change",le))}var a=document.getElementById("preview-survey");a&&a.addEventListener("click",Te);var i=document.getElementById("survey-questions-container");if(i){var o=Array.from(i.querySelectorAll("section.survey-question")),s=Boolean(1===o.length);if(0===o.length){var d=ge("survey-multiple-choice");i.append(d),(0,n.KT)(i),o.push(d),setTimeout((function(){var e=Ie(!0);Ae=void 0===e?null:JSON.stringify(e,null,"")}),1e3)}o.forEach((function(e){re()||se.bind(e)(),e.addEventListener("focusin",se);var t=Array.from(e.querySelectorAll("div[data-option]")),r=Boolean(t.length>=2);t.forEach((function(e){e.addEventListener("focusin",de),ie()||de.bind(e)();var t=e.querySelector("button[data-delete-option]");r&&t&&t.hasAttribute("disabled")?t.removeAttribute("disabled"):t&&!r&&t.setAttribute("disabled",""),t&&t.addEventListener("click",_e);var a=e.querySelector("button[data-option-type]");a&&a.addEventListener("click",ye)}));var a=e.querySelector("button[data-delete-survey]");s&&a?a.setAttribute("disabled",""):a&&a.hasAttribute("disabled")&&a.removeAttribute("disabled"),a&&a.addEventListener("click",Ee);var n=e.querySelector("button[data-question-type]");n&&n.addEventListener("click",pe,!0);var i=e.querySelector("button[data-hide-question]");i&&i.addEventListener("click",qe);var d=e.querySelector("button[data-add-question]");d&&o.length>=200?d.setAttribute("disabled",""):d&&d.hasAttribute("disabled")&&d.removeAttribute("disabled")}));var u=te();u&&Array.from(u.querySelectorAll("button")).forEach((function(e){e.addEventListener("click",Ne)}))}var p=document.getElementById("save-survey");p&&p.addEventListener("click",Ue);var l=document.getElementById("search-surveys-download-form");l&&l.addEventListener("submit",Pe),document.body.addEventListener("POLL_UPDATE",je),Array.from(document.querySelectorAll(Ke)).forEach((function(e){return e.addEventListener((0,n.CN)()?"touchstart":"mousedown",He,!0)})),window.addEventListener("beforeunload",Me),document.addEventListener("keydown",Oe)}function Ve(){Ae=null,Array.from(document.querySelectorAll(Ke)).forEach((function(e){return e.removeEventListener((0,n.CN)()?"touchstart":"mousedown",He,!0)})),window.removeEventListener("beforeunload",Me),document.body.removeEventListener("POLL_UPDATE",je)}}}]);