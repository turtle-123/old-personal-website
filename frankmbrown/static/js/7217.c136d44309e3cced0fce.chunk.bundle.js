(self.webpackChunkbundled_client_code=self.webpackChunkbundled_client_code||[]).push([[7217],{60124:function(e,t,n){"use strict";n.r(t),n.d(t,{EDIT_POINT_RADIUS:function(){return E},getAngleBetweenPoints:function(){return w},getAnimationFrame:function(){return M},getCurrentAppImage:function(){return $},getDistanceBetweenPoints:function(){return H},getEditPoint:function(){return P},getEventPositionInsideContainer:function(){return T},getHeightBetweenPoints:function(){return q},getOnMouseDown:function(){return C},getOnMouseMove:function(){return k},getOnMouseUp:function(){return D},getPixiApplication:function(){return A},getPixiContainer:function(){return I},getPointPositionInsideContainer:function(){return S},getRandomColor:function(){return L},getRelevantElements:function(){return B},getSetPixiMode:function(){return U},getTempShapeFill:function(){return z},getTempShapeLineStyle:function(){return j},getWidthBetweenPoints:function(){return N},onApplicationMouseDown:function(){return W},onApplicationMouseMove:function(){return G},onApplicationMouseUp:function(){return Y},onPixiLoad:function(){return pe},onPixiUnload:function(){return ge},setActiveElement:function(){return O},setPixiMode:function(){return _}});var i=n(51666),o=n(60429),a=n(32341),r=n.n(a),l=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function l(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}c((i=i.apply(e,t||[])).next())}))},c=function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],i=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},s=new Set(["manipulate","circle","rectangle","ellipse","line","polyline","polygon","path","text"]),d=function(e){return s.has(e)},u="manipulate",p=void 0,g=void 0,y=0,h={isDrawing:!1,type:"manipulate",manipulate:void 0,circle:void 0,rectangle:void 0,ellipse:void 0,line:void 0,polyline:void 0,polygon:void 0,path:void 0,text:void 0};function f(e){Object.keys(h).forEach((function(t){"isDrawing"!==t&&("type"===t?h.type=e:h[t]=void 0)})),h.isDrawing=!0}var v={circle:{},rectangle:{},ellipse:{},line:{},polyline:{},polygon:{},path:{},text:{}},m=function(e,t){return new CustomEvent("new_element_added",{detail:{type:e,shape:t}})};function w(e){var t=e.line1.end.x-e.line1.start.x,n=e.line1.end.y-e.line1.start.y,i=e.line2.end.x-e.line2.start.x,o=e.line2.end.y-e.line2.start.y,a=Math.atan2(t*o-n*i,t*i+n*o);return a<0&&(a*=-1),e.deg?a*(180/Math.PI):a}var x={width:2,color:"#000000",alpha:1,alignment:1},b=[16777215,1];function P(e){var t=new i.A1g;return t.lineStyle(x),t.beginFill.apply(t,b),e&&e.cursor?t.cursor=e.cursor:t.cursor="grab",e&&e.callback&&t.on("click",e.callback),t.position.x=e.position.x,t.position.y=e.position.y,t.drawCircle(0,0,E),t.endFill(),t}var E=5;function B(){return{manipulateButton:document.getElementById("manipulate-mode"),addCircleButton:document.getElementById("add-circle"),addRectangleButton:document.getElementById("add-rectangle"),addEllipseButton:document.getElementById("add-ellipse"),addLineButton:document.getElementById("add-line"),addPolylineButton:document.getElementById("add-polyline"),addPolygonButton:document.getElementById("add-polygon"),addPathButton:document.getElementById("add-path"),addTextButton:document.getElementById("add-text"),addAnimationButton:document.getElementById("add-animation"),clearEditorButton:document.getElementById("clear-editor"),deleteShapeButton:document.getElementById("delete-shape"),undoButton:document.getElementById("undo-last-change"),redoButton:document.getElementById("redo-last-change"),editCircleContainer:document.getElementById("edit-circle-container"),editRectangleContainer:document.getElementById("edit-rectangle-container"),editEllipseContainer:document.getElementById("edit-ellipse-container"),editLineContainer:document.getElementById("edit-line-container"),editPolylineContainer:document.getElementById("edit-polyline-container"),editPolygonContainer:document.getElementById("edit-polygon-container"),editPathContainer:document.getElementById("edit-path-container"),editTextContainer:document.getElementById("edit-text-container"),framesContainer:document.getElementById("change-animation-frame")}}function C(){return(0,o.CN)()?"touchstart":"mousedown"}function k(){return(0,o.CN)()?"touchmove":"mousemove"}function D(){return(0,o.CN)()?"touchcancel":"mouseup"}function S(e,t){var n=t.getBoundingClientRect();return{x:e.x-n.left,y:e.y-n.top}}function T(e,t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function A(){return g}function I(){return p}function M(){return y}function L(){return"#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}function F(e){e.classList.contains("selected")||e.classList.add("selected")}function R(e){e.classList.contains("selected")&&e.classList.remove("selected")}function _(e){var t=A();if(t)switch(u=e,function(e){var t=B(),n=t.manipulateButton,i=t.addCircleButton,o=t.addRectangleButton,a=t.addEllipseButton,r=t.addLineButton,l=t.addPolylineButton,c=t.addPolygonButton,s=t.addPathButton,d=t.addTextButton;t.addAnimationButton,n&&"manipulate"===e?F(n):n&&R(n),i&&"circle"===e?F(i):i&&R(i),o&&"rectangle"===e?F(o):o&&R(o),a&&"ellipse"===e?F(a):a&&R(a),r&&"line"===e?F(r):r&&R(r),l&&"polyline"===e?F(l):l&&R(l),c&&"polygon"===e?F(c):c&&R(c),s&&"path"===e?F(s):s&&R(s),d&&"text"===e?F(d):d&&R(d)}(e),u){case"manipulate":case"circle":case"rectangle":case"ellipse":case"line":case"polyline":case"polygon":case"path":case"text":case"circle":t.stage.cursor="crosshair"}}function U(e){return function(){_(e)}}function O(e){i.A1g}function N(e,t,n){void 0===n&&(n=!1);var i=t.x-e.x;return n?Math.abs(i):i}function q(e,t,n){void 0===n&&(n=!1);var i=t.y-e.y;return n?Math.abs(i):i}function H(e,t){return Math.sqrt(Math.pow(N(e,t,!1),2)+Math.pow(q(e,t,!1),2))}function j(){return{width:2,color:"red",alpha:1,alignment:.5}}function z(){return["blue",.3]}function W(e){switch(u){case"manipulate":!function(e){var t,n=A(),o=I();if(n&&o&&!h.isDrawing){var a=T(e,o),r=P({position:{x:a.x,y:a.y}}),l=new i.A1g;l.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),l.beginFill.apply(l,["blue",.3]),l.drawRoundedRect(a.x,a.y,0,0,0),l.endFill(),(t=n.stage).addChild.apply(t,[l,r]),f("manipulate"),h.manipulate={startPoint:r,rect:l,width:0,height:0}}}(e);break;case"circle":!function(e){var t,n,o=A(),a=I();if(o&&a)if(h.isDrawing){if(h.isDrawing){var r=h.circle;if(r){h.isDrawing=!1;var l={x:r.startPoint.position.x,y:r.startPoint.position.y},c=r.radius;(s=new i.A1g).lineStyle({width:2,color:"red",alpha:1,alignment:.5}),s.beginFill.apply(s,["blue",.3]),s.fill.alpha=1,s.drawCircle(l.x,l.y,c),s.endFill(),s.name="circle_".concat(window.crypto.randomUUID()),s.eventMode="static",s.cursor="pointer",s.on(C(),ne),(n=o.stage).addChild.apply(n,[s]),a.dispatchEvent(m("circle",s)),r.circle.destroy(),r.startPoint.destroy(),h.circle=void 0}}}else{var s,d=T(e,a),u=P({position:{x:d.x,y:d.y}});(s=new i.A1g).lineStyle({width:2,color:"red",alpha:1,alignment:.5}),s.beginFill.apply(s,["blue",.3]),s.drawCircle(d.x,d.y,0),s.endFill(),(t=o.stage).addChild.apply(t,[s,u]),f("circle"),h.circle={startPoint:u,circle:s,radius:0}}}(e);break;case"rectangle":!function(e){var t,n=A(),o=I();if(n&&o)if(h.isDrawing){if(h.isDrawing){var a=h.rectangle;if(a){s=T(e,o);var r={x:a.startPoint.position.x,y:a.startPoint.position.y},l=(d=new i.A1g,Math.min(s.x,r.x)),c=Math.min(s.y,r.y);d.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),d.beginFill.apply(d,["blue",.3]),d.fill.alpha=1,d.drawRoundedRect(l,c,a.width,a.height,0),d.endFill(),d.name="rect_".concat(window.crypto.randomUUID()),d.eventMode="static",d.cursor="pointer",d.on(C(),ie),a.rect.destroy(),a.startPoint.destroy(),h.rectangle=void 0,h.isDrawing=!1,n.stage.addChild(d),o.dispatchEvent(m("rectangle",d))}}}else{var s,d,u=P({position:{x:(s=T(e,o)).x,y:s.y}});(d=new i.A1g).lineStyle({width:2,color:"red",alpha:1,alignment:.5}),d.beginFill.apply(d,["blue",.3]),d.drawRoundedRect(s.x,s.y,0,0,0),d.endFill(),(t=n.stage).addChild.apply(t,[d,u]),f("rectangle"),h.rectangle={startPoint:u,rect:d,width:0,height:0}}}(e);break;case"ellipse":!function(e){var t,n=A(),o=I();if(n&&o)if(h.isDrawing){if(h.isDrawing){var a=h.ellipse;if(a){h.isDrawing=!1;var r=((d=T(e,o)).x+a.startCoord.x)/2,l=(d.y+a.startCoord.y)/2,c=N(a.startCoord,d,!0)/2,s=q(a.startCoord,d,!0)/2;a.startPoint.destroy(),a.rect.destroy(),a.ellipse.destroy(),(u=new i.A1g).name="ellipse_".concat(window.crypto.randomUUID()),u.beginFill("blue",1),u.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),u.fill.alpha=1,u.drawEllipse(r,l,c,s),u.endFill(),u.on(C(),oe),u.eventMode="static",u.cursor="pointer",n.stage.addChild(u),h.ellipse=void 0,o.dispatchEvent(m("ellipse",u))}}}else{var d,u,p=P({position:{x:(d=T(e,o)).x,y:d.y}}),g=new i.A1g;g.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),g.fill.alpha=0,g.drawRect(d.x,d.y,0,0),(u=new i.A1g).beginFill.apply(u,["blue",.3]),u.drawEllipse(d.x,d.y,0,0),f("ellipse"),h.ellipse={startPoint:p,rect:g,ellipse:u,startCoord:d},(t=n.stage).addChild.apply(t,[p,g,u])}}(e);break;case"line":!function(e){var t,n=A(),o=I();if(n&&o)if(h.isDrawing){if(h.isDrawing){var a=h.line;a&&(r=T(e,o),(l=new i.A1g).lineStyle({width:2,color:"red",alpha:1,alignment:.5}),l.moveTo(a.startPoint.x,a.startPoint.y).lineTo(r.x,r.y),l.eventMode="static",l.cursor="pointer",l.name="line_".concat(window.crypto.randomUUID()),l.on(C(),ae),a.startPoint.destroy(),a.line.destroy(),h.line=void 0,h.isDrawing=!1,n.stage.addChild(l),o.dispatchEvent(m("line",l)))}}else{var r,l,c=P({position:r=T(e,o)});(l=new i.A1g).lineStyle({width:2,color:"red",alpha:1,alignment:.5}),l.moveTo(r.x,r.y).lineTo(r.x,r.y),f("line"),h.line={startPoint:c,line:l},(t=n.stage).addChild.apply(t,[c,l])}}(e);break;case"polyline":!function(e){var t,n=A(),o=I();if(n&&o)if(h.isDrawing){if(h.isDrawing){var a=h.polyline;if(a){l=T(e,o),a.line.clear(),a.previousPoint.position.x=l.x,a.previousPoint.position.y=l.y,a.points.push(l),a.line.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),a.line.moveTo(a.points[0].x,a.points[0].y);for(var r=1;r<a.points.length;r++)a.line.lineTo(a.points[r].x,a.points[r].y)}}}else{var l,c=P({position:l=T(e,o)});c.eventMode="static",c.cursor="pointer",c.on(C(),re),c.on("mouseover",le),c.on("mouseout",ce);var s=new i.A1g;s.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),s.moveTo(l.x,l.y).lineTo(l.x,l.y),(t=n.stage).addChild.apply(t,[s,c]),f("polyline"),h.polyline={previousPoint:c,line:s,points:[l]}}}(e);break;case"polygon":!function(e){var t,n=A(),o=I();if(n&&o)if(h.isDrawing){if(h.isDrawing){var a=h.polygon;if(a){l=T(e,o),a.points.push(l),a.line.clear(),a.line.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),a.line.moveTo(a.points[0].x,a.points[0].y);for(var r=1;r<a.points.length;r++)a.line.lineTo(a.points[r].x,a.points[r].y)}}}else{var l,c=P({position:l=T(e,o)});c.eventMode="static",c.cursor="pointer",c.on(C(),se),c.on("mouseover",le),c.on("mouseout",ce);var s=new i.A1g;s.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),s.moveTo(l.x,l.y).lineTo(l.x,l.y),f("polygon"),(t=n.stage).addChild.apply(t,[s,c]),h.polygon={startPoint:c,line:s,points:[l]}}}(e);break;case"path":!function(e){if(!h.isDrawing){var t=A(),n=I();if(t&&n){var o=T(e,n),a=new i.A1g;a.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),a.moveTo(o.x,o.y).lineTo(o.x,o.y),t.stage.addChild(a),f("path"),h.path={points:[o],line:a}}}}(e);break;case"text":!function(e){var t=A(),n=I();if(t&&n){var o=T(e,n),a=new i.EYj("Click me to edit text.",{fontFamily:"Anuphan, sans-serif",fontSize:24,fill:16777215,align:"center"});a.position.x=o.x,a.position.y=o.y,t.stage.addChild(a),n.dispatchEvent(m("text",a))}}(e)}}function G(e){switch(u){case"manipulate":!function(e){var t;if(h.isDrawing){var n=A(),i=I();if(n&&i){var o=h.manipulate;if(o){var a=T(e,i);o.rect.clear();var r=o.startPoint.position,l=r.x,c=r.y,s=N({x:l,y:c},{x:a.x,y:a.y},!0),d=q({x:l,y:c},{x:a.x,y:a.y},!0);o.height=d,o.width=s;var u=Math.min(l,a.x),p=Math.min(c,a.y);o.rect.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),(t=o.rect).beginFill.apply(t,["blue",.3]),o.rect.drawRoundedRect(u,p,s,d,0),o.rect.endFill()}}}}(e);break;case"circle":!function(e){if(h.isDrawing){var t=A(),n=I();if(t&&n){var i=h.circle;if(i){var o=T(e,n),a=H({x:i.startPoint.position.x,y:i.startPoint.position.y},o),r=i.circle;r.clear(),r.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),r.beginFill.apply(r,["blue",.3]),r.drawCircle(i.startPoint.position.x,i.startPoint.position.y,a),r.endFill(),i.radius=a}}}}(e);break;case"rectangle":!function(e){var t;if(h.isDrawing){var n=I(),i=h.rectangle;if(n&&i){var o=T(e,n),a={x:i.startPoint.position.x,y:i.startPoint.position.y},r=N(a,o,!0),l=q(a,o,!0),c=Math.min(a.x,o.x),s=Math.min(a.y,o.y);i.rect.clear(),i.rect.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),(t=i.rect).beginFill.apply(t,["blue",.3]),i.rect.drawRoundedRect(c,s,r,l,0),i.rect.endFill(),i.width=r,i.height=l}}}(e);break;case"ellipse":!function(e){var t;if(h.isDrawing){var n=I(),i=h.ellipse;if(n&&i){var o=T(e,n),a=Math.min(o.x,i.startCoord.x),r=Math.min(o.y,i.startCoord.y),l=(o.x+i.startCoord.x)/2,c=(o.y+i.startCoord.y)/2,s=N(i.startCoord,o,!0),d=q(i.startCoord,o,!0);i.ellipse.clear(),i.rect.clear(),i.rect.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),i.rect.fill.alpha=0,i.rect.drawRect(a,r,s,d),(t=i.ellipse).beginFill.apply(t,["blue",.3]),i.ellipse.drawEllipse(l,c,s/2,d/2)}}}(e);break;case"line":!function(e){if(h.isDrawing){var t=I(),n=h.line;if(t&&n){var i=T(e,t);n.line.clear(),n.line.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),n.line.moveTo(n.startPoint.position.x,n.startPoint.position.y).lineTo(i.x,i.y)}}}(e);break;case"polyline":!function(e){if(e.stopPropagation(),h.isDrawing){var t=I(),n=h.polyline;if(t&&n){var i=T(e,t);n.line.clear(),n.line.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),n.line.moveTo(n.points[0].x,n.points[0].y);for(var o=0;o<n.points.length;o++)n.line.lineTo(n.points[o].x,n.points[o].y);n.line.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),n.line.line.alpha=.3,n.line.lineTo(i.x,i.y)}}}(e);break;case"polygon":!function(e){if(h.isDrawing){var t=I(),n=h.polygon;if(t&&n){var i=T(e,t);n.line.clear(),n.line.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),n.line.moveTo(n.points[0].x,n.points[0].y);for(var o=1;o<n.points.length;o++)n.line.lineTo(n.points[o].x,n.points[o].y);n.line.line.alpha=.8,n.line.lineTo(i.x,i.y)}}}(e);break;case"path":!function(e){if(h.isDrawing){var t=I(),n=h.path;if(t&&n){var i=T(e,t);n.line.moveTo(n.points[n.points.length-1].x,n.points[n.points.length-1].y).lineTo(i.x,i.y),n.points.push(i)}}}(e)}}function Y(e){switch(u){case"manipulate":!function(){if(h.isDrawing){var e=A(),t=I();if(e&&t){var n=h.manipulate;n&&(h.isDrawing=!1,n.startPoint.destroy(),n.rect.destroy(),h.manipulate=void 0)}}}();break;case"circle":case"rectangle":case"ellipse":case"line":case"polygon":case"text":default:break;case"polyline":!function(e){e.stopPropagation()}(e);break;case"path":h.isDrawing&&de()}}function X(e){h.isDrawing&&"path"===h.type&&de()}function J(e){var t=e.detail,n=t.type,i=t;d(n)&&i&&$().then((function(e){if(e){var t=B().framesContainer;t&&(te(e,0),t.innerHTML="",t.append(e))}})).catch((function(e){return console.error(e)}))}function K(e){}function Q(e){if("Escape"===e.key&&h.isDrawing)switch(h.type){case"manipulate":h.manipulate&&(h.manipulate.rect.destroy(),h.manipulate.startPoint.destroy(),h.manipulate=void 0,h.isDrawing=!1);break;case"circle":h.circle&&(h.circle.circle.destroy(),h.circle.startPoint.destroy(),h.circle=void 0,h.isDrawing=!1);break;case"rectangle":h.rectangle&&(h.rectangle.rect.destroy(),h.rectangle.startPoint.destroy(),h.rectangle=void 0,h.isDrawing=!1);break;case"ellipse":h.ellipse&&(h.ellipse.ellipse.destroy(),h.ellipse.rect.destroy(),h.ellipse.startPoint.destroy(),h.ellipse=void 0,h.isDrawing=!1);break;case"line":h.line&&(h.line.line.destroy(),h.line.startPoint.destroy(),h.line=void 0,h.isDrawing=!1);break;case"polyline":h.polyline&&(h.polyline.line.destroy(),h.polyline.previousPoint.destroy(),h.polyline=void 0,h.isDrawing=!1);break;case"polygon":h.polygon&&(h.polygon.line.destroy(),h.polygon.startPoint.destroy(),h.polygon=void 0,h.isDrawing=!1);break;case"path":h.path&&(h.path.line.destroy(),h.path=void 0,h.isDrawing=!1);break;case"text":h.text&&(h.text=void 0,h.isDrawing=!1)}}function V(e){var t=A();if(t){for(var n=t.stage.children.length-1;n>=0;n--)t.stage.removeChild(t.stage.children[n]);Object.keys(v).forEach((function(e){v[e]={}}))}}function Z(e){}function $(){return l(this,void 0,void 0,(function(){var e,t,n;return c(this,(function(o){switch(o.label){case 0:return e=A(),t=I(),e&&t?(n=new i.M_G(0,0,t.offsetWidth,t.offsetHeight),[4,e.renderer.extract.image(e.stage,"image/webp",.92,n)]):[3,2];case 1:return[2,o.sent()];case 2:return[2,void 0]}}))}))}function ee(e){var t=this.getAttribute("data-frame"),n=I();if(t&&n){var i=parseInt(t);!isNaN(i)&&isFinite(i)&&(y=i)}}function te(e,t){e.classList.add("no-click"),e.setAttribute("height","75px"),e.setAttribute("width","100px"),e.style.cssText="height:75px!important; width: 100px!important;margin:0px!important;display: inline;border:2px solid var(--text-primary);cursor:pointer;background:var(--background);",e.setAttribute("data-frame",t.toFixed(0)),e.addEventListener("click",ee)}function ne(e){this.name;var t=I();!h.isDrawing&&t&&e.stopPropagation()}function ie(e){e.stopPropagation(),console.log(this.name)}function oe(e){e.preventDefault()}function ae(e){}function re(e){e.stopPropagation();var t=h.polyline,n=A(),o=I();if(t&&n&&o){var a=structuredClone(t.points);t.previousPoint.destroy(),t.line.destroy();var r=new i.A1g;r.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),r.moveTo(a[0].x,a[0].y);for(var l=1;l<a.length;l++)r.lineTo(a[l].x,a[l].y);r.name="polyline_".concat(window.crypto.randomUUID()),n.stage.addChild(r),h.isDrawing=!1,h.polyline=void 0,o.dispatchEvent(m("polyline",r))}}function le(e){this.clear(),I()&&(this.lineStyle(x),this.beginFill.apply(this,b),this.drawCircle(0,0,2*E))}function ce(e){this.clear(),I()&&(this.lineStyle(x),this.beginFill.apply(this,b),this.drawCircle(0,0,E))}function se(e){e.stopPropagation();var t=h.polygon,n=A(),o=I();if(t&&n&&o){structuredClone(t.points),t.startPoint.destroy(),t.line.destroy();var a=new i.A1g;a.beginFill.apply(a,["blue",.3]),a.fill.alpha=1,a.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),a.drawPolygon(t.points),a.eventMode="static",a.cursor="pointer",a.name="polygon_".concat(window.crypto.randomUUID()),n.stage.addChild(a),o.dispatchEvent(m("polygon",a)),h.isDrawing=!1,h.polygon=void 0}}function de(){var e=A(),t=h.path,n=I();if(t&&e&&n){h.isDrawing=!1,t.line.destroy();var o=structuredClone(t.points),a=r()(o.map((function(e){return[e.x,e.y]})),50),l=new i.A1g;l.lineStyle({width:2,color:"red",alpha:1,alignment:.5}),l.moveTo(o[0].x,o[0].y);for(var c=0;c<a.length;c++)l.bezierCurveTo(a[c][1][0],a[c][1][1],a[c][2][0],a[c][2][1],a[c][3][0],a[c][3][1]);e.stage.addChild(l),n.dispatchEvent(m("path",l)),h.path=void 0}}function ue(e){var t=this.getAttribute("data-hide-show-section"),n=this.querySelector("span"),i=this.querySelector("svg");if(t&&n&&i){var o=document.getElementById(t);o&&(o.hasAttribute("hidden")?(this.classList.remove("success"),this.classList.add("warning"),n.innerText="HIDE",i.style.cssText="",o.removeAttribute("hidden")):(this.classList.remove("warning"),this.classList.add("success"),n.innerText="SHOW",i.style.cssText="transform:rotate(180deg);",o.setAttribute("hidden","")))}}function pe(){document.addEventListener("keydown",Q);var e=document.querySelector("div[data-pixi-container]");if(document.getElementById("pixi-context-ref"),e&&!g){p=e,(g=new i.lgM({antialias:!0,resizeTo:p,backgroundAlpha:0})).stage.eventMode="static",g.stage.cursor="pointer",p.appendChild(g.view);var t=B(),n=t.manipulateButton,o=t.addCircleButton,a=t.addRectangleButton,r=t.addEllipseButton,l=t.addLineButton,c=t.addPolylineButton,s=t.addPolygonButton,d=t.addPathButton,u=t.addAnimationButton,y=t.addTextButton,h=t.clearEditorButton,f=(t.deleteShapeButton,t.undoButton,t.redoButton,t.framesContainer);n&&n.addEventListener("click",U("manipulate")),o&&o.addEventListener("click",U("circle")),a&&a.addEventListener("click",U("rectangle")),r&&r.addEventListener("click",U("ellipse")),l&&l.addEventListener("click",U("line")),c&&c.addEventListener("click",U("polyline")),s&&s.addEventListener("click",U("polygon")),d&&d.addEventListener("click",U("path")),y&&y.addEventListener("click",U("text")),h&&h.addEventListener("click",V),u&&u.addEventListener("click",Z),_("manipulate"),g.ticker.add((function(){})),g.stage.sortableChildren=!0,g.stage.eventMode="static",g.stage.hitArea=g.screen,g.stage.on(C(),W),g.stage.on(k(),G),g.stage.on(D(),Y),g.stage.on("mouseleave",X),e.addEventListener("new_element_added",J),e.addEventListener("element_removed",K),f&&0===f.children.length&&$().then((function(e){e&&(te(e,M()),f.append(e))})).catch((function(e){}))}document.querySelectorAll("button[data-hide-show-section]").forEach((function(e){return e.addEventListener("click",ue)}))}function ge(){u="manipulate",p=void 0,g=void 0}},42634:function(){}}]);