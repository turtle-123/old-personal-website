"use strict";(self.webpackChunkbundled_client_code=self.webpackChunkbundled_client_code||[]).push([[2285],{52285:function(e,t,n){n.r(t),n.d(t,{onChatLoad:function(){return m},onChatUnload:function(){return u}});var o=n(8189),i=n(60429),c=!1;function d(){var e=document.getElementById("connection-open"),t=document.getElementById("connection-down"),n=document.getElementById("submit-chat-message");t&&e&&n&&(t.setAttribute("hidden",""),e.removeAttribute("hidden"),n.removeAttribute("disabled"))}function s(){var e=document.getElementById("connection-open"),t=document.getElementById("connection-down"),n=document.getElementById("submit-chat-message");t&&e&&n&&(e.setAttribute("hidden",""),t.removeAttribute("hidden"),n.setAttribute("disabled",""))}function a(){if(window.socket){var e=(0,o.getEditorState)("lexical_example_editor"),t=window.socket;if(t&&e){var n=document.getElementById("loading-dialog");n&&(0,i.pX)(n,"Submitting Chat Message"),t.emit("send-chat",{lexical_state:e},r)}}}function r(e){var t=e.error,n=e.error_message,o=e.svg,c=e.chat_message,d=document.getElementById("loading-dialog");if(d&&(0,i.zU)(d),t)o?document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:n,svg:o}})):document.dispatchEvent(new CustomEvent("DISPATCH_SNACKBAR",{detail:{severity:"error",message:n}}));else{var s=document.getElementById("chat-messages");s&&(s.insertAdjacentHTML("beforeend",c),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED")))}}function m(){var e=document.getElementById("submit-chat-message");if(window.socket){var t=window.socket;t.active?d():s(),c||t.emit("join","chat",function(e){return function(t){"boolean"!=typeof t||!0!==t||c||(c=t,e.on("connect",d),e.on("disconnect",s),e.on("chat-message",r))}}(t)),e&&e.addEventListener("click",a)}}function u(){if(window.socket){var e=window.socket;c&&e.emit("leave","chat",function(e){return function(t){"boolean"==typeof t&&!0===t&&c&&(c=t,e.removeListener("connect",d),e.removeListener("disconnect",s),e.removeListener("chat-message",r))}}(e))}}}}]);