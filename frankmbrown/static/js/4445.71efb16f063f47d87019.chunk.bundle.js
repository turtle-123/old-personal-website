"use strict";(self.webpackChunkbundled_client_code=self.webpackChunkbundled_client_code||[]).push([[4445],{4445:function(e,t,r){r.r(t),r.d(t,{onArticleBuilder:function(){return o},onArticleBuilder2:function(){return f},onArticleBuilderUnload:function(){return c}});var i=r(8189);function n(e){var t,r,n,a="",d=document.getElementById("article-builder-form"),o=document.getElementById("article-title"),c=document.querySelector("html");o&&(a=o.value);var l=document.getElementById("preview-article-different-sizes");if(d&&l&&c){var s=(0,i.getCurrentEditor)();if(s){var v=s.getEditorState(),p=(0,i.getEditorInstances)()["mobile-article-builder-example"],f=(0,i.getEditorInstances)()["tablet-article-builder-example"],E=(0,i.getEditorInstances)()["desktop-article-builder-example"];if(p&&f&&E){var b=null===(t=p.getRootElement())||void 0===t?void 0:t.parentElement;if(b){var g=(L=Array.from(b.children))[0],y=L.length>=2?L[1]:void 0;g&&"H1"===g.nodeName&&g.remove(),y&&y.hasAttribute("data-preview-article-date")&&y.remove();var h=u(a),A=m();b.insertAdjacentElement("afterbegin",h),h.insertAdjacentElement("afterend",A)}p.setEditable(!1);var S=p.parseEditorState(v.toJSON());p.setEditorState(S);var w=null===(r=f.getRootElement())||void 0===r?void 0:r.parentElement;if(w){g=(L=Array.from(w.children))[0],y=L.length>=2?L[1]:void 0,g&&"H1"===g.nodeName&&g.remove(),y&&y.hasAttribute("data-preview-article-date")&&y.remove();var I=u(a),B=m();w.insertAdjacentElement("afterbegin",I),I.insertAdjacentElement("afterend",B)}f.setEditable(!1);var x=f.parseEditorState(v.toJSON());f.setEditorState(x);var q=null===(n=E.getRootElement())||void 0===n?void 0:n.parentElement;if(q){var L;g=(L=Array.from(q.children))[0],y=L.length>=2?L[1]:void 0,g&&"H1"===g.nodeName&&g.remove(),y&&y.hasAttribute("data-preview-article-date")&&y.remove();var k=u(a),N=m();q.insertAdjacentElement("afterbegin",k),k.insertAdjacentElement("afterend",N)}E.setEditable(!1);var T=E.parseEditorState(v.toJSON());E.setEditorState(T),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED",{detail:{el:l}})),d.setAttribute("hidden",""),l.removeAttribute("hidden")}}}}function a(e){var t=document.getElementById("article-builder-form"),r=document.getElementById("preview-article-different-sizes");t&&r&&(r.setAttribute("hidden",""),t.removeAttribute("hidden"))}function d(e){e.preventDefault(),e.stopPropagation();var t=(0,i.getCurrentEditor)();if(t){var r=JSON.stringify(t.getEditorState().toJSON());navigator.clipboard.writeText(r).then((function(){var e=document.getElementById("article-builder-success");e&&(e.setAttribute("aria-hidden","false"),setTimeout((function(){e.setAttribute("aria-hidden","true")}),4e3))})).catch((function(e){console.error(e);var t=document.getElementById("article-builder-error");t&&(t.setAttribute("aria-hidden","false"),setTimeout((function(){t.setAttribute("aria-hidden","true")}),4e3))}))}}function o(){var e=document.querySelector("footer");e&&e.setAttribute("hidden","");var t=document.getElementById("speed-dial-main");t&&t.style.setProperty("bottom","12vh","important");var r=document.getElementById("article-builder-form");r&&r.addEventListener("submit",d,!0);var i=document.getElementById("preview-content-sizes"),o=document.getElementById("show-article-editor");i&&i.addEventListener("click",n),o&&o.addEventListener("click",a)}function c(){var e=document.querySelector("footer");e&&e.removeAttribute("hidden");var t=document.getElementById("speed-dial-main");t&&t.style.removeProperty("bottom")}function l(){var e=Array.from(document.querySelectorAll("section[data-article-builder]")),t=this.closest("section[data-article-builder]");if(t&&e.length>1){var r=t.querySelector("div.lexical-wrapper");if(r){var n=r.id;(0,i.clearEditor)(String(n)),t.remove()}}var a=Array.from(document.querySelectorAll("button[data-delete-section]"));a.forEach((function(e){1===a.length?e.setAttribute("disabled",""):e.hasAttribute("disabled")&&e.removeAttribute("disabled")}))}function u(e){var t=document.createElement("h1");return t.classList.add("page-title"),t.setAttribute("role","presentation"),t.innerText=e,t}function s(){var e=document.createElement("div");return e.classList.add("lexical-wrapper","example-render","mt-3"),e.setAttribute("data-rich-text-editor",""),e.style.setProperty("padding","0px","important"),e}function m(){var e=document.createElement("div");e.setAttribute("data-preview-article-date",""),e.classList.add("flex-row","align-center","justify-between","w-100","bb-main","p-md");var t=document.createElement("address");t.classList.add("body1"),t.style.setProperty("font-style","normal","important"),t.insertAdjacentHTML("afterbegin",'<span>By: </span><a class="primary link" href="/" hx-get="/" hx-target="#PAGE" hx-indicator="#page-transition-progress">Frank Brown</a>');var r=document.createElement("time");r.setAttribute("data-date-short","");var i=(new Date).toISOString();return r.setAttribute("datetime",i),r.insertAdjacentHTML("afterbegin",'<svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="CalendarToday"><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"></path></svg><span></span>'),e.append(t),e.append(r),e}function v(){var e="",t=document.getElementById("article-title");t&&(e=t.value);var r=Array.from(document.querySelectorAll("section[data-article-builder]>div.lexical-wrapper")).map((function(e){return e.id})).filter((function(e){return"string"==typeof e})),n=(0,i.getEditorInstances)(),a=r.map((function(e){return n[e]})).map((function(e){return e.getEditorState()})),d=Date.now(),o="mobile_".concat(String(d)),c="tablet_".concat(String(d)),l="desktop_".concat(String(d)),v=document.querySelector("section#article-preview-section article[data-preview-mobile]"),p=document.querySelector("section#article-preview-section article[data-preview-tablet]"),f=document.querySelector("section#article-preview-section article[data-preview-desktop]");if(v){var E=u(e),b=m();v.append(E),v.append(b),a.forEach((function(e,t){var r=s(),n=o.concat("_").concat(String(t));r.setAttribute("id",n),v.append(r),(0,i.registerFullEditor)(r);var a=(0,i.getEditorInstances)()[n];a&&(a.setEditable(!1),a.setEditorState(e))}))}p&&(E=u(e),b=m(),p.append(E),p.append(b),a.forEach((function(e,t){var r=s(),n=c.concat("_").concat(String(t));r.setAttribute("id",n),p.append(r),(0,i.registerFullEditor)(r);var a=(0,i.getEditorInstances)()[n];a&&(a.setEditable(!1),a.setEditorState(e))}))),f&&(E=u(e),b=m(),f.append(E),f.append(b),a.forEach((function(e,t){var r=s(),n=l.concat("_").concat(String(t));r.setAttribute("id",n),f.append(r),(0,i.registerFullEditor)(r);var a=(0,i.getEditorInstances)()[n];a&&(a.setEditable(!1),a.setEditorState(e))}))),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED"));var g=document.getElementById("article-builder-form"),y=document.getElementById("article-preview-section");g&&g.setAttribute("hidden",""),y&&y.removeAttribute("hidden")}function p(){var e=document.querySelector("section#article-preview-section article[data-preview-mobile]"),t=document.querySelector("section#article-preview-section article[data-preview-tablet]"),r=document.querySelector("section#article-preview-section article[data-preview-desktop]");e&&(Array.from(e.querySelectorAll("div[data-rich-text-editor]")).map((function(e){return e.id})).filter((function(e){return"string"==typeof e})).forEach((function(e){(0,i.clearEditor)(e)})),e.innerHTML=""),t&&(Array.from(t.querySelectorAll("div[data-rich-text-editor]")).map((function(e){return e.id})).filter((function(e){return"string"==typeof e})).forEach((function(e){(0,i.clearEditor)(e)})),t.innerHTML=""),r&&(Array.from(r.querySelectorAll("div[data-rich-text-editor]")).map((function(e){return e.id})).filter((function(e){return"string"==typeof e})).forEach((function(e){(0,i.clearEditor)(e)})),r.innerHTML="");var n=document.getElementById("article-builder-form"),a=document.getElementById("article-preview-section");a&&a.setAttribute("hidden",""),n&&n.removeAttribute("hidden")}function f(){var e=Array.from(document.querySelectorAll("button[data-delete-section]"));e.forEach((function(t){t.addEventListener("click",l),1===e.length?t.setAttribute("disabled",""):t.hasAttribute("disabled")&&t.removeAttribute("disabled")}));var t=document.getElementById("preview-article-button"),r=document.getElementById("edit-article-button");t&&t.addEventListener("click",v),r&&r.addEventListener("click",p)}}}]);