"use strict";(self.webpackChunkbundled_client_code=self.webpackChunkbundled_client_code||[]).push([[7028],{87028:function(e,t,n){n.r(t),n.d(t,{onLoadArticleBuilder:function(){return g},onUnloadArticleBuilder:function(){return E},registerArticle:function(){return y}});var r=n(8189),a=n(60429),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},l=void 0,d=null;function u(e){var t="s_".concat(window.crypto.randomUUID()),n='\n  <div id="'.concat(t,'" class="snackbar error filled medium icon" aria-hidden="false" role="alert" data-snacktime="4000">\n    <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Code"><path d="M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg>\n    <p class="p-sm">').concat(e,'</p>\n    <button class="icon medium" type="button" data-close-snackbar aria-label="Close Snackbar">\n      <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="CloseSharp"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>\n    </button>\n  </div>\n  ');document.body.insertAdjacentHTML("beforeend",n),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED")),setTimeout((function(){var e=document.getElementById(t);e&&e.remove()}),4e3)}function s(e){var t=document.createElement("div");t.classList.add("lexical-wrapper","example-render"),t.style.setProperty("padding","0px","important"),t.setAttribute("data-rich-text-editor","");var n="sect_".concat(window.crypto.randomUUID());t.setAttribute("id",n),(0,r.registerFullEditor)(t);var a=(0,r.getEditorInstances)()[n];if(a){var i=a.parseEditorState(e);return a.setEditorState(i),a.setEditable(!1),t}return null}function m(e){var t=document.getElementById("article-title"),n=document.getElementById("article-description"),a=document.getElementById("article-banner-image"),i=document.getElementById("article-body"),o=document.getElementById("article-version");if(t&&n&&a&&i){var c=document.querySelector('input[name="article-banner-image-text"]'),l=o&&!isNaN(parseInt(o.value))&&isFinite(parseInt(o.value))?parseInt(o.value):void 0,u=(0,r.getEditorState)(i.id);if(u)return{title:t.value,description:n.value,editorState:u,image:(null==c?void 0:c.value)||"",version:l}}return d}function f(e){var t=this.closest("output");if(t){var n=t.querySelector("article[data-preview-mobile]"),a=t.querySelector("article[data-preview-tablet]"),i=t.querySelector("article[data-preview-desktop]");if(n&&a&&i){var o=t.getAttribute("form");if(o){var c=document.getElementById(o);if(c){t.setAttribute("hidden",""),c.removeAttribute("hidden");var l=Array.from(t.querySelectorAll("div.lexical-wrapper"));l.length&&l.forEach((function(e){var t=e.id;t&&(0,r.clearEditor)(t)})),n.innerHTML="",a.innerHTML="",i.innerHTML=""}}}else u("Unable to find mobile, tablet, or desktop output <article> elements.")}else console.error("There should be an output here.")}function p(e){return o(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,l,d,f,p,v,b,h,w,y,g,E,x,A,S;return c(this,(function(c){if(e=this.closest("form"),t=document.querySelector("html"),e&&t&&(n=e.id,(r=m())&&n)){if(a=document.querySelector('output[form="'.concat(n,'"]')),!r.title)return u("Unable to find article title."),[2];if(!r.editorState)return u("Unable to locate the article body."),[2];if(!a)return u("There must be an output element for the form#".concat(n," to preview the article.")),[2];if(i=a.querySelector("article[data-preview-mobile]"),o=a.querySelector("article[data-preview-tablet]"),l=a.querySelector("article[data-preview-desktop]"),!i||!o||!l)return u("Unable to find mobile, tablet, or desktop output <article> elements."),[2];(d=document.createElement("h1")).classList.add("page-title"),d.innerText=r.title,(f=document.createElement("p")).classList.add("mt-2"),f.innerText=r.description,p=new Date,v=p.getFullYear(),b=p.getMonth()+1,h=p.getDate(),w=p.getHours(),y=p.getMinutes(),g="".concat(v,"-").concat(b,"-").concat(h,"T").concat(w,":").concat(y),E='<div class="mt-2 bb-main flex-row justify-between" style="padding-bottom: 4px;">\n      <div class="flex-column align-center gap-2" style="width: fit-content;">\n        <span class="bold">Date Created:</span>\n        <time data-date-format="MM/DD/YYYY" datetime="'.concat(g,'">\n          <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="CalendarToday">\n            <path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z">\n            </path>\n          </svg>\n          <span></span>\n        </time>\n      </div>\n      <div class="flex-column align-center gap-2" style="width: fit-content;">\n        <span class="bold">Last Edited:</span>\n        <time data-date-format="MM/DD/YYYY" datetime="').concat(g,'">\n          <svg focusable="false" inert viewBox="0 0 24 24" tabindex="-1" title="Edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>\n          <span></span>\n        </time>\n      </div>\n    </div>'),i.append(d.cloneNode(!0),f.cloneNode(!0)),o.append(d.cloneNode(!0),f.cloneNode(!0)),l.append(d.cloneNode(!0),f.cloneNode(!0)),i.insertAdjacentHTML("beforeend",E),o.insertAdjacentHTML("beforeend",E),l.insertAdjacentHTML("beforeend",E),x=s(r.editorState),A=s(r.editorState),S=s(r.editorState),x&&A&&S&&(i.append(x),o.append(A),l.append(S)),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED")),e.setAttribute("hidden",""),a.removeAttribute("hidden")}return[2]}))}))}function v(e){if(e.ctrlKey&&"s"===e.key.toLowerCase()){if(e.preventDefault(),l){var t=document.getElementById(l);if(t){var n=t.querySelector('button[type="submit"][data-submit="save"]');n&&n.dispatchEvent(new Event("click"))}}return!1}e.ctrlKey&&"h"===e.key.toLowerCase()?(e.preventDefault(),Array.from(document.querySelectorAll("section[data-article-builder] button[data-hide-show]")).forEach((function(e){var t=document.getElementById(String(e.getAttribute("data-el")).slice(1));t&&!t.hasAttribute("hidden")&&e.click()}))):e.ctrlKey&&"o"===e.key.toLowerCase()&&(e.preventDefault(),Array.from(document.querySelectorAll("section[data-article-builder] button[data-hide-show]")).forEach((function(e){var t=document.getElementById(String(e.getAttribute("data-el")).slice(1));t&&t.hasAttribute("hidden")&&e.click()})))}function b(e){var t="submit";"publish"===this.getAttribute("data-submit")?t="publish":"save"===this.getAttribute("data-submit")&&(t="save");var n=this.closest("form");if(n){var r=n.getAttribute("data-hx-params"),o=n.getAttribute("data-loading"),c=n.getAttribute("data-hx-post");if(r)for(var l="",s=0,f=r.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length}));s<f.length;s++){var p=f[s],v=n.querySelector('input[name="'.concat(p,'"]'));v&&(l.length?l+="&":l+="?",l+="".concat(p,"=").concat(v.value))}var b=n.getAttribute("data-hx-target"),h=n.getAttribute("data-hx-swap");d=m();var w=i(i({},d),{submitType:t}),y=null;w&&c&&(o&&(y=document.getElementById("loading-dialog"))&&(0,a.pX)(y,o),fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":(0,a.Qm)()},body:JSON.stringify(w)}).then((function(e){if(200!==e.status)throw new Error("Network request");return e.text()})).then((function(e){if(b){var t=document.querySelector(b),n=document.createElement("div");n.insertAdjacentHTML("afterbegin",e),t&&(h&&"innerHTML"!==h?"outerHTML"===h?(t.outerHTML=n.outerHTML,window.htmx&&window.htmx.process(n)):"beforebegin"===h?(t.insertAdjacentElement("beforebegin",n),window.htmx&&window.htmx.process(n)):"afterbegin"===h?(t.insertAdjacentElement("afterbegin",n),window.htmx&&window.htmx.process(n)):"beforeend"===h?(t.insertAdjacentElement("beforeend",n),window.htmx&&window.htmx.process(n)):"afterend"===h?(t.insertAdjacentElement("afterend",n),window.htmx&&window.htmx.process(n)):"delete"===h&&(t.remove(),window.htmx&&window.htmx.process(n)):(t.innerHTML=n.outerHTML,window.htmx&&window.htmx.process(n)),document.dispatchEvent(new CustomEvent("NEW_CONTENT_LOADED")))}y&&(0,a.zU)(y)})).catch((function(e){console.error(e),y&&(0,a.zU)(y),u("Something went wrong submitting the article.")})))}}function h(e){var t=this.id;t&&(l=t)}function w(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}function y(e){e.addEventListener("focusin",h),e.addEventListener("submit",w,!0),document.addEventListener("keydown",v,!0);var t=Array.from(e.querySelectorAll('button[type="submit'));t&&t.forEach((function(e){return e.addEventListener("click",b,!0)}));var n=e.querySelector("button[data-preview-article]");if(n&&n.addEventListener("click",p),e.id){var r=document.querySelector('output[form="'.concat(e.id,'"]'));if(r){var a=r.querySelector("button[data-edit-article]");a&&a.addEventListener("click",f)}}}function g(){var e=document.querySelector("form[data-article]");e&&y(e)}function E(){d=null,document.removeEventListener("keydown",v)}}}]);